namespace = cultural_revolt_inv

cultural_revolt_inv.1 = { #looking for cultures ready to revolt
	type = country_event
	immediate = {
		every_country_culture = {
			limit = {
				is_integrated = no
                NOT = {
                    has_country_culture_modifier = revolting_culture
                }
			}
			save_scope_as = target_revolted_culture
            
			random_list = {
				600 = {}
				2000 = {
					modifier = {
                        factor = 5
                        scope:target_revolted_culture = {
                            country_culture_pop_count >= 40
                        }
                    }
					modifier = {
                        factor = 2
                        scope:target_revolted_culture = {
                            country_culture_pop_count >= 150
                        }
                    }
					modifier = {
                        factor = 2
                        scope:target_revolted_culture = {
                            country_culture_pop_count >= 500
                        }
                    }
					modifier = {
                        factor = 0.5
                        scope:target_revolted_culture = {
                            OR = {
                                has_country_culture_modifier = administrators_cultmodifier
                                has_culture_group = root.culture.culture_group
                            }
                            
                        }
                    }
					modifier = {
                        factor = 0.8
                        scope:target_revolted_culture = {
                            has_country_culture_modifier = inheritance_right
                        }
                    }
					modifier = {
                        factor = 0.8
                        scope:target_revolted_culture = {
                            has_country_culture_modifier = torture_protection
                        }
                    }
					modifier = {
                        factor = 1.5
                        scope:target_revolted_culture = {
                            OR = {
                                has_country_culture_modifier = dissatisfied_culture
                                has_country_culture_modifier = uprisings_happens
                                has_country_culture_modifier = revolt_in_progress
                            }
                        }
                    }
					modifier = {
                        factor = 0.8
                        scope:target_revolted_culture = {
                            OR = {
                                has_country_culture_modifier = right_of_marriage
                            }
                            
                        }
                    }
					modifier = {
                        factor = 1.4
                        scope:target_revolted_culture = {
                            OR = {
                                has_country_culture_modifier = colonia_founded
                                has_country_culture_modifier = despised_annexed_culture
                            }
                            
                        }
                    }
					modifier = {
                        factor = 1.2
                        scope:target_revolted_culture = {
                            OR = {
                                has_country_culture_modifier = slave_rights_imposed
                                has_country_culture_modifier = rights_revoked
                            }
                            
                        }
                    }
					modifier = {
                        factor = 1.2
                        scope:target_revolted_culture = {
                            has_country_culture_modifier = annexed_culture_unhappy
                        }
                    }
					modifier = {
                        factor = 0.8
                        scope:target_revolted_culture = {
                            OR = {
                                has_country_culture_modifier = protected_customs 
                                has_country_culture_modifier = appeased_protests
                            }
                            
                        }
                    }
					modifier = {
                        factor = 0.7
                        scope:target_revolted_culture = {
                            has_country_culture_modifier = respected_annexed_culture
                        }
                    }
					modifier = {
                        factor = 1.2
                        scope:target_revolted_culture = {
                            stability < 40
                        }
                    }
					modifier = {
                        factor = 1.3
                        scope:target_revolted_culture = {
                            stability < 30
                        }
                    }
					modifier = {
                        factor = 1.4
                        scope:target_revolted_culture = {
                            stability < 20
                        }
                    }
					modifier = {
                        factor = 2
                        scope:target_revolted_culture = {
                            stability < 10
                        }
                    }
                    if = {
                        limit = { 
                            root = {
                                any_owned_province = {
                                    dominant_province_culture = scope:target_revolted_culture.culture
                                }
                            }
                        }
                        if = {
                            limit = {  
                                scope:target_revolted_culture = {
                                    has_country_culture_modifier = dissatisfied_culture
                                }
                            }
                            root = {
                                trigger_event = { 
                                    id = cultural_revolt_inv.4
                                    days = {1 10}
                                }
                                
                            }
                        }
                        else = {
                            root = {
                                trigger_event = { 
                                    id = cultural_revolt_inv.2
                                    days = {1 10}
                                }
                            }
                        }
                    } 
				}
			}
		}
	}

}

cultural_revolt_inv.2 = { # the first revolt - small
    type = country_event
    title = "cultural_revolt_event.2.t"
    desc = "cultural_revolt_event.2.desc" 
    picture = proscription
    goto_location = scope:random_province_revolted_cult
    left_portrait = scope:revolted_prov_gov 


    immediate = {
        if = { #check if competent governor or ruler
            limit = { 
                any_governorships = {
                    governor_or_ruler = {
                        NOT = { has_culture = scope:target_revolted_culture.culture }
                        OR = {
                            charisma  >= 10
                            has_trait = prominent 
                            has_trait = silver_tongued
                            has_trait = generous
                        }
                    }
                    any_governorship_state = {
                        any_state_province = {
                            dominant_province_culture = scope:target_revolted_culture.culture	
                        }
                    }
                }
            }
            
            random_governorships = {
                limit = {
                
                    governor_or_ruler = {
                        NOT = { has_culture = scope:target_revolted_culture.culture }
                        OR = {
                            charisma >= 10
                            has_trait = prominent 
                            has_trait = silver_tongued
                            has_trait = generous
                        }
                    }
                    any_governorship_state = {
                        any_state_province = {
                            dominant_province_culture = scope:target_revolted_culture.culture	
                        }
                    }
                }
                governor_or_ruler = { 
                    save_scope_as = revolted_prov_gov
                    random_governor_state = {
                        limit = {
                            any_state_province = {
                                dominant_province_culture = scope:target_revolted_culture.culture	
                            }
                        }
                        random_state_province = {
                            limit = {
                                dominant_province_culture = scope:target_revolted_culture.culture
                            }
                            weight = {
                                modifier = {
                                    add = total_population
                                }
                            }
                            save_scope_as = random_province_revolted_cult
                        }
                    }
                }

            }
        }
        else = { #else, just take the governor of the chosen province
            
			ordered_owned_province = {
				limit = { dominant_province_culture = scope:target_revolted_culture.culture }
				max = 1
				order_by = total_population
				save_scope_as = random_province_revolted_cult
			}
            scope:random_province_revolted_cult = {
                if = {
                    limit = {
                        exists = governor_or_ruler
                    }
                    governor_or_ruler = {
                        save_scope_as = revolted_prov_gov
                    }
                }
                else = {
                    root = {
                        current_ruler = {
                            save_scope_as = revolted_prov_gov
                        }
                    }
                }
                
            
            }

        }
           
    }

    
    option = { #do nothing - get the modifier
        name = cultural_revolt_inv.2.a
        scope:target_revolted_culture = {
            add_country_culture_modifier = {
                name = "dissatisfied_culture"
				duration = 3650
            }
        }
        custom_tooltip = cultural_revolt_inv.2.a.tt1
    }

    option = { #give them rights
        name = cultural_revolt_inv.2.b
        custom_tooltip = cultural_revolt_inv.2.b.tt1
        trigger = {
            scope:revolted_prov_gov = {
                NOT = { has_trait = harsh }
            }
        }
        if = { #check the already existent rights
            limit = {
                scope:target_revolted_culture = {
                    NOT = {
                        has_country_culture_modifier = torture_protection
                    }
                }
            }
            add_stability = -5
			culture_state_loyalty_effect = yes
			scope:target_revolted_culture = {
				add_country_culture_modifier = {
					name = "torture_protection" 
					duration = -1
				}
			}
			add_country_modifier = {
				name = "extended_torture_protection"
				duration = 1095
			}
            if = {
                limit = {
                    is_republic = yes
                }
                if = {
                    limit = {
                        has_party_type = optimates_party
                    }
                    add_party_approval = {
                        party_type = optimates_party
                        VALUE = party_disapproval_small_svalue
                    }
                    add_party_approval = {
                        party_type = boni_party
                        VALUE = party_approval_small_svalue
                    }
                }
                else = {
                    add_party_approval = {
                        party_type = democratic_party
                        VALUE = party_approval_small_svalue
                    }
                    add_party_approval = {
                        party_type = traditionalist_party
                        VALUE = party_disapproval_small_svalue
                    }
                }
            }

        }
        else_if = {
            limit = { 
                scope:target_revolted_culture = {
                    NOT = {
                        has_country_culture_modifier = right_to_enter_contracts
                    }
                }
            }
			add_stability = -5
			culture_state_loyalty_effect = yes
			scope:target_revolted_culture = {
				add_country_culture_modifier = {
					name = "right_to_enter_contracts" 
					duration = -1
				}
			}
			add_country_modifier = {
				name = "extended_contract_rights"
				duration = 1095
			}
			approval_effect = {
				PARTY = optimates_party
				VALUE = party_disapproval_small_svalue
			}
			approval_effect = {
				PARTY = boni_party
				VALUE = party_approval_small_svalue
			}
			approval_effect = {
				PARTY = oligarchic_party
				VALUE = party_disapproval_small_svalue
			}
			approval_effect = {
				PARTY = democratic_party
				VALUE = party_approval_small_svalue
			}
        }
        else_if = {
            limit = { 
                scope:target_revolted_culture = {
                    NOT = {
                        has_country_culture_modifier = inheritance_right
                    }
                }
            }
            add_stability = -5
			culture_state_loyalty_effect = yes
			scope:target_revolted_culture = {
				add_country_culture_modifier = {
					name = "inheritance_right" 
					duration = -1
				}
			}
			add_country_modifier = {
				name = "extended_inheritance_right"
				duration = 1095
			}
            if = {
                limit = {
                    is_republic = yes
                }
                if = {
                    limit = {
                        has_party_type = optimates_party
                    }
                    add_party_approval = {
                        party_type = optimates_party
                        VALUE = party_disapproval_medium_svalue
                    }
                    add_party_approval = {
                        party_type = populares_party
                        VALUE = party_approval_medium_svalue
                    }
                }
                else = {
                    add_party_approval = {
                        party_type = democratic_party
                        VALUE = party_approval_medium_svalue
                    }
                    add_party_approval = {
                        party_type = traditionalist_party
                        VALUE = party_disapproval_medium_svalue
                    }
                }
            }
        }
        else_if = {
            limit = { 
                scope:target_revolted_culture = {
                    NOT = {
                        has_country_culture_modifier = right_to_enter_contracts
                    }
                }
            }
            add_stability = -10
			culture_state_loyalty_effect = yes
			scope:target_revolted_culture = {
				add_country_culture_modifier = {
					name = right_of_marriage
					duration = -1
				}
			}
			add_country_modifier = {
				name = "extended_right_of_marriage"
				duration = 1825
			}
			ordered_owned_province = {
				limit = { dominant_province_culture = scope:target_revolted_culture.culture }
				max = 1
				order_by = total_population
				state = {
					add_state_modifier = {
						name = "intermarriage_spree"
						duration = 1825
					}
				}
			}
			approval_effect = {
				PARTY = populares_party
				VALUE = party_disapproval_small_svalue
			}
			approval_effect = {
				PARTY = boni_party
				VALUE = party_approval_small_svalue
			}
			approval_effect = {
				PARTY = oligarchic_party
				VALUE = party_disapproval_small_svalue
			}
			approval_effect = {
				PARTY = democratic_party
				VALUE = party_approval_small_svalue
			}
        }

        else = { #all rights already taken - give them some hard modifier
			scope:target_revolted_culture = {
				add_country_culture_modifier = {
					name = protected_customs
					duration = 3600
				}
			}
        }
        
        random_list = {
            300 = { #succeeds
                scope:target_revolted_culture = {
                    add_country_culture_modifier = {
                        name = appeased_protests
                        duration = 7300
                    }
                }
                custom_tooltip = cultural_revolt_inv.2.b.tt2
            }
            1 = { #fails
                modifier = {
                    add = scope:target_revolted_culture.country_culture_pop_count
                }
                modifier = {
                    factor = 0.7
                    scope:revolted_prov_gov = {
                            charisma >= 10
                    }
                }
                modifier = {
                    factor = 0.7
                    scope:revolted_prov_gov = {
                            has_trait = silver_tongued
                    }
                }
                modifier = {
                    factor = 0.6
                    scope:revolted_prov_gov = {
                            has_trait = prominent
                    }
                }
                modifier = {
                    factor = 0.8
                    scope:revolted_prov_gov = {
                            has_trait = generous
                    }
                }
                modifier = {
                    factor = 1.2
                    scope:revolted_prov_gov = {
                            has_trait = corrupt
                    }
                }
                custom_tooltip = cultural_revolt_inv.2.b.tt3
                scope:target_revolted_culture = {
                    add_country_culture_modifier = {
                        name = "dissatisfied_culture"
                        duration = 3650
                    }
                }
                trigger_event = {
                    id = cultural_revolt_inv.3
                    days = {1 10}
                }
            }
        }
    }

    option = { #they already have some rights and gov is competent
        name = cultural_revolt_inv.2.c
        trigger = {
            scope:revolted_prov_gov = {
                NOR = { 
                    has_culture = scope:target_revolted_culture.culture
                    has_trait = harsh
                    has_trait = rash
                }
                OR = {
                    finesse >= 10
                    has_trait = silver_tongued 
                    has_trait = stubborn
                    has_trait = just
                }
            }
            scope:target_revolted_culture = {
                OR = {
                    has_country_culture_modifier = right_to_enter_contracts
                    has_country_culture_modifier = inheritance_right
                    has_country_culture_modifier = torture_protection
                    has_country_culture_modifier = right_of_marriage
                }
            }
        }
        highlight = yes
        custom_tooltip = cultural_revolt_inv.2.c.tt1
        random_list = {
            200 = { #suceeds
                custom_tooltip = cultural_revolt_inv.2.c.tt2
                modifier = {
                    factor = {
                        value = 1
                        add = {
                            value = scope:revolted_prov_gov.finesse
                            divide = 20
                        }
                    }
                }
            }
            1 = { #fails
                modifier = {
                    add = scope:target_revolted_culture.country_culture_pop_count
                }
                modifier = {
                    factor = 0.7
                    scope:revolted_prov_gov = {
                            has_trait = silver_tongued
                    }
                }
                modifier = {
                    factor = 0.8
                    scope:revolted_prov_gov = {
                            has_trait = stubborn
                    }
                }
                modifier = {
                    factor = 0.6
                    scope:revolted_prov_gov = {
                            has_trait = just
                    }
                }
                modifier = {
                    factor = 1.2
                    scope:revolted_prov_gov = {
                            has_trait = corrupt
                    }
                }
                custom_tooltip = cultural_revolt_inv.2.c.tt3
                scope:target_revolted_culture = {
                    add_country_culture_modifier = {
                        name = "dissatisfied_culture"
                        duration = 3650
                    }
                }
                trigger_event = {
                    id = cultural_revolt_inv.3
                    days = {1 10}
                }
            }
        }

    }
    option = { #hit them with the stick
        name = cultural_revolt_inv.2.d
        custom_tooltip = cultural_revolt_inv.2.d.tt1

		add_manpower = { #10 manpower per pop
			value = 0
			subtract = scope:target_revolted_culture.country_culture_pop_count
			divide = 100
			max = root.manpower
		}
        hidden_effect = {
            if = {
                limit = {
                    any_character = { 
                        is_adult = yes
                        has_culture = scope:target_revolted_culture.culture
                        has_character_modifier = culture_spokesman
                    }
                }
                random_character = {
                    limit = {
                        is_adult = yes
                        has_culture = scope:target_revolted_culture.culture
                        has_character_modifier = culture_spokesman
                    }
                    add_loyalty = spokesman_culture_repressed
                }
            }
        }

        random_list = {#base 50/50 whatever the pop
            50 = { #suceeds
                custom_tooltip = cultural_revolt_inv.2.d.tt2
                scope:target_revolted_culture = {
                    add_country_culture_modifier = {
                        name = "got_repressed"
                        duration = 3650
                    }
                }
            }
            50 = { #fails
                modifier = {
                    factor = 0.7
                    scope:revolted_prov_gov = {
                            martial >= 10
                    }
                }
                modifier = {
                    factor = 0.7
                    scope:revolted_prov_gov = {
                            has_trait = cruel
                    }
                }
                modifier = {
                    factor = 0.8
                    scope:revolted_prov_gov = {
                            has_trait = harsh
                    }
                }
                modifier = {
                    factor = 0.6
                    scope:revolted_prov_gov = {
                            has_trait = disciplined
                    }
                }
                modifier = {
                    factor = 1.2
                    scope:revolted_prov_gov = {
                            has_trait = uncaring
                    }
                }
                custom_tooltip = cultural_revolt_inv.2.d.tt3
                scope:target_revolted_culture = {
                    add_country_culture_modifier = {
                        name = "dissatisfied_culture"
                        duration = 3650
                    }
                    add_country_culture_modifier = {
                        name = "got_repressed"
                        duration = 3650
                    }
                }
                trigger_event = {
                    id = cultural_revolt_inv.3
                    days = {1 10}
                }
            }
        }

    }
}

cultural_revolt_inv.3 = { # inform the player that it did not work
    type = country_event
    title = "cultural_revolt_event.3.t"
    desc = "cultural_revolt_event.3.desc" 
    picture = proscription
    goto_location = scope:random_province_revolted_cult
    left_portrait = scope:revolted_prov_gov 

    option = {
        name = cultural_revolt_inv.3.a
        custom_tooltip = cultural_revolt_inv.3.a.tt1
    }

}

cultural_revolt_inv.4 = {
    type = country_event
    title = "cultural_revolt_event.4.t"
    desc = "cultural_revolt_event.4.desc"
    picture = great_work_riot
    goto_location = scope:random_province_revolted_cult
    left_portrait = scope:revolted_prov_gov

    immediate = {
        if = { #check if competent governor or ruler
            limit = { 
                any_governorships = {
                    governor_or_ruler = {
                        NOT = { has_culture = scope:target_revolted_culture.culture }
                        OR = {
                            charisma  >= 10
                            has_trait = prominent 
                            has_trait = silver_tongued 
                            has_trait = wise
                        }
                    }
                    any_governorship_state = {
                        any_state_province = {
                            dominant_province_culture = scope:target_revolted_culture.culture	
                        }
                    }
                }
            }
            
            random_governorships = {
                limit = {
                
                    governor_or_ruler = {
                        NOT = { has_culture = scope:target_revolted_culture.culture }
                        OR = {
                            charisma >= 10
                            has_trait = prominent 
                            has_trait = silver_tongued 
                            has_trait = wise
                        }
                    }
                    any_governorship_state = {
                        any_state_province = {
                            dominant_province_culture = scope:target_revolted_culture.culture	
                        }
                    }
                }
                governor_or_ruler = { 
                    save_scope_as = revolted_prov_gov
                    random_governor_state = {
                        limit = {
                            any_state_province = {
                                dominant_province_culture = scope:target_revolted_culture.culture	
                            }
                        }
                        random_state_province = {
                            limit = {
                                dominant_province_culture = scope:target_revolted_culture.culture
                            }
                            weight = {
                                modifier = {
                                    add = total_population
                                }
                            }
                            save_scope_as = random_province_revolted_cult
                        }
                    }
                }

            }
        }
        else = { #else, just take the governor of the chosen province
            
			ordered_owned_province = {
				limit = { dominant_province_culture = scope:target_revolted_culture.culture }
				max = 1
				order_by = total_population
				save_scope_as = random_province_revolted_cult
			}
            scope:random_province_revolted_cult = {
                if = {
                    limit = {
                        exists = governor_or_ruler
                    }
                    governor_or_ruler = {
                        save_scope_as = revolted_prov_gov
                    }
                }
                else = {
                    root = {
                        current_ruler = {
                            save_scope_as = revolted_prov_gov
                        }
                    }
                }
                
            
            }

        }
        hidden_effect = { #for clarity - those towns get a negative modifier
            ordered_owned_province = {
                limit = { dominant_province_culture = scope:target_revolted_culture.culture }
                max = {
                    value = scope:target_revolted_culture.country_culture_pop_count
                    divide = 80
                    min = 1
                }
                order_by = total_population
                add_province_modifier = {
                    name = angry_town
                    duration = 5400 #15 Years
                }
            } 
        }
    }
    option = { #do nothing - get the modifier
        name = cultural_revolt_inv.4.a
        scope:target_revolted_culture = {
            remove_country_culture_modifier = dissatisfied_culture
            add_country_culture_modifier = {
                name = "uprisings_happens"
				duration = 3650
            }
        }
        custom_tooltip = cultural_revolt_inv.4.a.tt1
    }
    option = { #find a solution diplomatically
        name = cultural_revolt_inv.4.b
        custom_tooltip = cultural_revolt_inv.4.b.tt1
        trigger = {
            NOT = {
                root = {
                    any_character = {
                        is_adult = yes
                        has_culture = scope:target_revolted_culture.culture
                        has_character_modifier = culture_spokesman
                    }
                }
            }
        }

        add_treasury = { #1 gold per pop
			value = 0
			subtract = scope:target_revolted_culture.country_culture_pop_count
		}
        random_list = {
            300 = { #gets proposition of diplomat event 5
                modifier = {
                    factor = 0.7
                    scope:target_revolted_culture = {
                        has_country_culture_modifier = got_repressed
                    }
                }
                modifier = {
                    factor = 0.2
                    scope:target_revolted_culture = {
                        has_country_culture_modifier = crucified_spokesman
                    }
                }
                modifier = {
                    factor = 1.4
                    scope:revolted_prov_gov = {
                            charisma >= 10
                    }
                }
                modifier = {
                    factor = 1.4
                    scope:revolted_prov_gov = {
                            has_trait = silver_tongued
                    }
                }
                modifier = {
                    factor = 1.6
                    scope:revolted_prov_gov = {
                            has_trait = prominent
                    }
                }
                modifier = {
                    factor = 1.2
                    scope:revolted_prov_gov = {
                            has_trait = assertive
                    }
                }
                custom_tooltip = cultural_revolt_inv.4.b.tt2
                trigger_event = {
                    id = cultural_revolt_inv.5
                    days = {1 10}
                }
            }
            1 = {#gets exigence event 6
                modifier = {
                    add = scope:target_revolted_culture.country_culture_pop_count
                }
                modifier = {
                    factor = 1.2
                    scope:revolted_prov_gov = {
                            has_trait = dumb
                    }
                }
                modifier = {
                    factor = 1.2
                    scope:revolted_prov_gov = {
                            has_trait = generous
                    }
                }
                modifier = {
                    factor = 1.2
                    scope:target_revolted_culture = {
                            has_country_culture_modifier = annexed_culture_unhappy
                    }
                }
                modifier = {
                    factor = 1.3
                    scope:target_revolted_culture = {
                            has_country_culture_modifier = despised_annexed_culture
                    }
                }
                modifier = {
                    factor = 3
                    scope:revolted_prov_gov = {
                            has_culture = scope:target_revolted_culture.culture
                    }
                }
                custom_tooltip = cultural_revolt_inv.4.b.tt3
                trigger_event = {
                    id = cultural_revolt_inv.6
                    days = {1 10}
                }
            }
            1 = { #fails and keep protests event 3 - fail event
                modifier = {
                    add = scope:target_revolted_culture.country_culture_pop_count
                }
                modifier = {
                    factor = 1.2
                    scope:revolted_prov_gov = {
                            has_trait = corrupt
                    }
                }
                modifier = {
                    factor = 1.4
                    scope:revolted_prov_gov = {
                            has_trait = cruel
                    }
                }
                modifier = {
                    factor = 2
                    scope:target_revolted_culture = {
                        has_country_culture_modifier = got_repressed
                    }
                }
                modifier = {
                    factor = 3
                    scope:target_revolted_culture = {
                        has_country_culture_modifier = crucified_spokesman
                    }
                }
                custom_tooltip = cultural_revolt_inv.4.b.tt4
                scope:target_revolted_culture = {
                    remove_country_culture_modifier = dissatisfied_culture
                    add_country_culture_modifier = {
                        name = "uprisings_happens"
                        duration = 3650
                    }
                }
                trigger_event = {
                    id = cultural_revolt_inv.3
                    days = {1 10}
                }
            }
        }
    }
    option = { #There is a spokesman at court already, summon him 
        name = cultural_revolt_inv.4.c
        trigger = {
            any_character = {
                is_adult = yes
                has_culture = scope:target_revolted_culture.culture
                has_character_modifier = culture_spokesman
            }
        }
        highlight = yes
        custom_tooltip = cultural_revolt_inv.4.c.tt1
        random_character = {
            limit = {
                is_adult = yes
                has_culture = scope:target_revolted_culture.culture
                has_character_modifier = culture_spokesman
            }
            save_scope_as = revolted_spokesman
        }
        random_list = {
            10 = { #accepts to be summonned
                custom_tooltip = cultural_revolt_inv.2.c.tt2
                modifier = {
                    add = current_ruler.charisma
                }
                modifier = {
                    add = {
                        value = tyranny
                        divide = 10
                    }
                }
                modifier = {
                    factor = 2
                    scope:revolted_spokesman = {
                            loyalty >= 50
                    }
                }
                modifier = {
                    factor = 1.1
                    current_ruler = {
                        has_trait = honest
                    }
                }
                modifier = {
                    factor = 1.2
                    current_ruler = {
                        has_trait = generous
                    }
                }
                modifier = {
                    factor = 1.2
                    current_ruler = {
                        has_trait = prominent
                    }
                }
                
                trigger_event = {
                    id = cultural_revolt_inv.7
                    days = {1 10}
                }
            }
            5 = { #refuses
                modifier = {
                    add = 0.7
                    current_ruler = {
                        charisma >= 10
                    }
                }
                modifier = {
                    factor = 1.1
                    current_ruler = {
                        has_trait = abrasive
                    }
                }
                modifier = {
                    factor = 1.4
                    current_ruler = {
                        has_trait = unnoticeable
                    }
                }
                modifier = {
                    factor = 1.2
                    current_ruler = {
                        has_trait = dumb
                    }
                }
                modifier = {
                    factor = 1.2
                    current_ruler = {
                        has_trait = forgiving
                    }
                }
                modifier = {
                    factor = 1.5
                    current_ruler = {
                        is_rival = scope:revolted_spokesman
                    }
                }
                modifier = {
                    factor = 0.5
                    current_ruler = {
                        is_friend = scope:revolted_spokesman
                    }
                }
                modifier = {
                    factor = 2
                    scope:revolted_spokesman = {
                            loyalty <= 30
                    }
                }
                modifier = {
                    factor = 0
                    scope:revolted_spokesman = {
                            loyalty >= 80
                    }
                }
                custom_tooltip = cultural_revolt_inv.4.c.tt3
                scope:target_revolted_culture = {
                    remove_country_culture_modifier = dissatisfied_culture
                    add_country_culture_modifier = {
                        name = "uprisings_happens"
                        duration = 3650
                    }
                }
                trigger_event = {
                    id = cultural_revolt_inv.8
                    days = {1 10}
                }
            }
        }

    }
    option = { #send the army
    name = cultural_revolt_inv.4.d
    custom_tooltip = cultural_revolt_inv.4.d.tt1

    add_manpower = { #10 manpower per pop
        value = 0
        subtract = scope:target_revolted_culture.country_culture_pop_count
        divide = 100
        max = root.manpower
    }
    hidden_effect = {
        if = {
            limit = {
                any_character = { 
                    is_adult = yes
                    has_culture = scope:target_revolted_culture.culture
                    has_character_modifier = culture_spokesman
                }
            }
            random_character = {
                limit = {
                    is_adult = yes
                    has_culture = scope:target_revolted_culture.culture
                    has_character_modifier = culture_spokesman
                }
                add_loyalty = spokesman_culture_repressed
            }
        }
    }

    random_list = {#base 50/50 whatever the pop
        50 = { #suceeds
            custom_tooltip = cultural_revolt_inv.4.d.tt2
            scope:target_revolted_culture = {
                add_country_culture_modifier = {
                    name = "got_repressed"
                    duration = 3650
                }
            }
            every_owned_province = {
                limit = {
                    dominant_province_culture = scope:target_revolted_culture.culture
                    has_province_modifier = angry_town
                }
                every_pops_in_province = {
                    limit = {
                        pop_culture = scope:target_revolted_culture.culture
                    }
                    random_list = {
                        20 = { kill_pop = yes }
                        
                        80 = {}
                    }
                    
                }
            }

            hidden_effect = {
                every_owned_province = {
                    limit = {
                        dominant_province_culture = scope:target_revolted_culture.culture
                        has_province_modifier = angry_town
                    }
                    remove_province_modifier = angry_town
                }
            }
        }
        50 = { #fails
            modifier = {
                factor = 0.7
                scope:revolted_prov_gov = {
                        martial >= 10
                }
            }
            modifier = {
                factor = 2
                scope:revolted_prov_gov = {
                        has_culture = scope:target_revolted_culture.culture
                }
            }
            modifier = {
                factor = 0.7
                scope:revolted_prov_gov = {
                        has_trait = cruel
                }
            }
            modifier = {
                factor = 0.8
                scope:revolted_prov_gov = {
                        has_trait = harsh
                }
            }
            modifier = {
                factor = 0.6
                scope:revolted_prov_gov = {
                        has_trait = disciplined
                }
            }
            modifier = {
                factor = 1.2
                scope:revolted_prov_gov = {
                        has_trait = uncaring
                }
            }
            custom_tooltip = cultural_revolt_inv.4.d.tt3
            scope:target_revolted_culture = {
                add_country_culture_modifier = {
                    name = ""
                    duration = 3650
                }
                add_country_culture_modifier = {
                    name = "got_repressed"
                    duration = 3650
                }
            }
            trigger_event = {
                id = cultural_revolt_inv.3
                days = {1 10}
            }
        }
    }
    }
}


cultural_revolt_inv.5 = { # get some choice of resolving the issue - gain a spokesman
    type = country_event
    title = "cultural_revolt_event.5.t"
    desc = "cultural_revolt_event.5.desc" 
    picture = senator_conversing
    goto_location = scope:random_province_revolted_cult
    left_portrait = scope:revolted_prov_gov 
    right_portrait = scope:revolted_spokesman
    immediate = {
        if = {
            limit = {
                NOT = {
                    root = {
                        any_character = {
                            is_adult = yes
                            has_culture = scope:target_revolted_culture.culture
                            has_character_modifier = culture_spokesman
                            trigger_if = {
                                limit = {
                                    employer = { gender_equality = no }
                                }
                                is_female = no
                            }
                        }
                    }
                }
            }
            if = {
                limit = {
                    root = {
                        any_character = {
                            is_adult = yes
                            has_culture = scope:target_revolted_culture.culture
                            trigger_if = {
                                limit = {
                                    employer = { gender_equality = no }
                                }
                                is_female = no
                            }
                        }
                    }
                }
                ordered_character = {
                    limit = {
                        has_culture = scope:target_revolted_culture.culture
                        is_adult = yes
                        trigger_if = {
                            limit = {
                                employer = { gender_equality = no }
                            }
                            is_female = no
                        }
                    }
                    order_by = charisma
                    add_loyalty = spokesman_elevated
                    save_scope_as = revolted_spokesman
                }
            }
            else = {
                create_character = {
                    age = 34
                    female = no
                    culture = scope:target_revolted_culture.culture
                    religion = scope:random_province_revolted_cult.dominant_province_religion
                    add_charisma = 4
                    add_finesse = 2
                    add_trait = prominent
                    add_loyalty = spokesman_elevated
                    add_character_modifier = {
                        name = "culture_spokesman"
                        duration = -1
                    }
                    save_scope_as = revolted_spokesman
                }
            }
        }
        else = { #should not happens as if there is already a spokesman, the choice should not be here for this event, but in case
            random_character = {
                limit = {
                    is_adult = yes
                    has_culture = scope:target_revolted_culture.culture
                    has_character_modifier = culture_spokesman
                }
                save_scope_as = revolted_spokesman
            }
        }
        if = {
            limit = {is_monarchy = yes}
            add_legitimacy = legitimacy_small
        }
    }

    option = {#offer some independants rights - spokesman gets no position but is still here
        name = cultural_revolt_inv.5.a
        custom_tooltip = cultural_revolt_inv.5.a.tt1
        trigger = {
            current_ruler = {
                NOR = {
                    has_trait = harsh
                    has_trait = rash
                }
                OR = {
                    charisma >= 10
                    has_trait = prominent 
                    has_trait = silver_tongued 
                    has_trait = wise
                }
            }
        }
        highlight = yes
        scope:target_revolted_culture = {
            add_country_culture_modifier = {
                name = "respected_annexed_culture"
				duration = 1825
            }
         }
        # every_owned_province = {
        #     limit = {
        #         dominant_province_culture = scope:target_revolted_culture.culture
        #         has_province_modifier = angry_town
        #     }
        #     remove_province_modifier = angry_town

        # }
        
    }
    option = {#offer spokeman to be governor
        name = cultural_revolt_inv.5.b
        custom_tooltip = cultural_revolt_inv.5.b.tt1
        trigger = {
            any_governorships = {
				any_governorship_state = {
					any_state_province = {
						dominant_province_culture = scope:target_revolted_culture.culture
						owner = ROOT
					}
				}
				exists = governor
				governor = {
					NOT = { has_culture = scope:target_revolted_culture.culture }
					is_ruler = no
				}
                
            }
            scope:revolted_spokesman = { is_governor = no }
        }
		ordered_governorships = {
			limit = {
				any_governorship_state = {
					any_state_province = {
						dominant_province_culture = scope:target_revolted_culture.culture
						owner = ROOT
					}
				}
				exists = governor
				governor = {
					NOT = { has_culture = scope:target_revolted_culture.culture }
					is_ruler = no
				}
			}
			max = 1
			check_range_bounds = no
			order_by = {
				value = 0
				every_governorship_state = {
					every_state_province = {
						limit = {
							dominant_province_culture = scope:target_revolted_culture.culture
						}
						add = 1
					}
				}
			}
			random_governorship_state = {
				random_state_province = { #just to set the governor
					save_scope_as = revolted_cultural_governorship_province
				}
			}
		}
		scope:revolted_cultural_governorship_province = {
			governor = {
				add_loyalty = loyalty_replaced_as_governor
			}
			set_as_governor = scope:revolted_spokesman
		}
		scope:revolted_spokesman = {
			add_loyalty = loyalty_ruling_their_own
		}
        trigger_event = { #check if in position in 10 months
            id = cultural_revolt_inv.9
            days = 300 #10months
        }
    }
    option = {#offer the spokesman to be at governement
        name = cultural_revolt_inv.5.c
        custom_tooltip = cultural_revolt_inv.5.c.tt1
        if = {
            limit = {
                is_republic = yes
            }
            scope:revolted_spokesman = { give_office = office_tribune_of_the_soldiers }
            if = {
                limit = {
                    has_party_type = populares_party
                }
                add_party_approval = {
                    party_type = populares_party
                    VALUE = party_approval_small_svalue
                }
            }
            else = {
                add_party_approval = {
                    party_type = democratic_party
                    VALUE = party_approval_small_svalue
                }
            }
            if = {
                limit = {
                    has_party_type = optimates_party
                }
                add_party_approval = {
                    party_type = optimates_party
                    VALUE = party_disapproval_small_svalue
                }
            }
            else = {
                add_party_approval = {
                    party_type = oligarchic_party
                    VALUE = party_disapproval_small_svalue
                }
            }
        }
        else_if = {
            limit = {
                is_tribal = yes
            }
            scope:revolted_spokesman = { give_office = office_arbitrator }
            
        }
        else_if = {
            limit = {
                is_monarchy = yes
            }
            scope:revolted_spokesman = { give_office = office_foreign_minister }
        }
        add_political_influence = subtract_influence_medium
    }
    option = {#kill the spokeman
        name = cultural_revolt_inv.5.d
        custom_tooltip = cultural_revolt_inv.5.d.tt1
        
        scope:revolted_spokesman = {
            death = {
                death_reason = death_crucified
                killer = ruler
            }
        }
        scope:target_revolted_culture = {
            add_country_culture_modifier = {
                name = "crucified_spokesman"
                duration = 7300
            }
        }
    }
    option = {#accept the spokesman as representative but nothing else - a "cancel option", but you get the spokesman !
        name = cultural_revolt_inv.5.e
        custom_tooltip = cultural_revolt_inv.5.e.tt1
        scope:target_revolted_culture = {
            remove_country_culture_modifier = dissatisfied_culture
            add_country_culture_modifier = {
                name = "uprisings_happens"
                duration = 3650
            }
        }
        
    }

}
cultural_revolt_inv.6 = { #rebels exige either a governor with low loyalty, or large concessions
    type = country_event
    title = "cultural_revolt_event.6.t"
    desc = "cultural_revolt_event.6.desc" 
    picture = senator_conversing
    goto_location = scope:random_province_revolted_cult
    left_portrait = scope:revolted_prov_gov 
    right_portrait = scope:revolted_spokesman

}

cultural_revolt_inv.7 = { #spokesman comes and present some solutions - a rather positive event depending on his loyalty and some traits - no %chances, just choice availables or not
    type = country_event
    title = "cultural_revolt_event.7.t"
    desc = "cultural_revolt_event.7.desc" 
    picture = senator_conversing
    goto_location = scope:random_province_revolted_cult
    left_portrait = scope:revolted_prov_gov 
    right_portrait = scope:revolted_spokesman

}

cultural_revolt_inv.8 = { #The spokesman do not come - options to get rid of him, else nothing
    type = country_event
    title = "cultural_revolt_event.8.t"
    desc = "cultural_revolt_event.8.desc" 
    picture = senator_conversing
    goto_location = scope:random_province_revolted_cult
    left_portrait = scope:revolted_prov_gov 
    right_portrait = scope:revolted_spokesman

}
cultural_revolt_inv.9 = { #Check if spokesman is governor, and sent to correct event 
    type = country_event

}


cultural_revolt_inv.10 = { #Spokesman is governor, yay - lose angry town
    type = country_event
    title = "cultural_revolt_event.10.t"
    desc = "cultural_revolt_event.10.desc" 
    picture = senator_conversing
    goto_location = scope:random_province_revolted_cult
    left_portrait = scope:revolted_prov_gov 
    right_portrait = scope:revolted_spokesman

}


cultural_revolt_inv.11 = { #Spokesman is not governor, maluses are applied
    type = country_event
    title = "cultural_revolt_event.11.t"
    desc = "cultural_revolt_event.11.desc" 
    picture = senator_conversing
    goto_location = scope:random_province_revolted_cult
    left_portrait = scope:revolted_prov_gov 
    right_portrait = scope:revolted_spokesman

}


