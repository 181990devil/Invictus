namespace = harvest

harvest.0 = { #introductory event
	type = country_event
	title = "harvest.0.t"
	desc = "harvest.0.desc"
	picture = farming
	
	trigger = {
		is_ai = no
	}

	fire_only_once = yes
	
	option = {
		name = harvest.0.a
	}
}

harvest.1 = { #Winter
	type = country_event	
	
	trigger = {
		NOT = { has_global_variable = harvest_winter_var }
	}	
	hidden = yes
	
	immediate = {
		trigger_event = { id = harvest.1 days = 365 }
		set_global_variable = { name = harvest_winter_var value = 1 days = 90 }
		every_province = {
			if = {
				limit = {
					OR = {
						trade_goods = grain
						trade_goods = vegetables
					}
					NOT = {
						region = lower_egypt_region
						region = mesopotamia_region
						region = madhyadesa_region
						region = pracya_region
					}
				}
				add_province_modifier = {
					name = harvest_winter_foodgood_modifier
					duration = 91
				}
			}
			if = {
				limit = {
					trade_goods = fish
					OR = {
						AND = {
							NOT = {
								region = lower_egypt_region
								region = mesopotamia_region
								region = madhyadesa_region
								region = pracya_region
							}
						}
						AND = {
							OR = {
								region = lower_egypt_region
								region = mesopotamia_region
								region = madhyadesa_region
								region = pracya_region
							}
							terrain = desert
						}
					}
				}
				add_province_modifier = {
					name = harvest_winter_fish_modifier
					duration = 91
				}
			}
			if = {
				limit = {
					trade_goods = cattle
				}
				add_province_modifier = {
					name = harvest_winter_animal_modifier
					duration = 91
				}
			}
			if = {
				limit = {
					OR = {
						trade_goods = fur
						trade_goods = wild_game
					}
				}
				add_province_modifier = {
					name = harvest_winter_wildanimal_modifier
					duration = 91
				}
			}
			if = {
				limit = {
					NOT = {
						trade_goods = cattle
						trade_goods = fur
						trade_goods = wild_game
					}
					OR = {
						region = lower_egypt_region
						region = mesopotamia_region
						region = madhyadesa_region
						region = pracya_region
					}
					NOT = {
						terrain = desert
					}
				}
				add_province_modifier = {
					name = harvest_winter_floodplain_modifier
					duration = 91
				}
			}
			if = {
				limit = {
					NOT = {
						trade_goods = fish
						trade_goods = grain
						trade_goods = cattle
						trade_goods = vegetables
						trade_goods = fur
						trade_goods = wild_game
					}
					OR = {
						region = lower_egypt_region
						region = mesopotamia_region
						region = madhyadesa_region
						region = pracya_region
					}
					terrain = desert
				}
				add_province_modifier = {
					name = harvest_winter_modifier
					duration = 91
				}
			}
			if = {
				limit = {
					NOT = {
						trade_goods = fish
						trade_goods = grain
						trade_goods = cattle
						trade_goods = vegetables
						trade_goods = fur
						trade_goods = wild_game
					}
					NOT = {
						region = lower_egypt_region
						region = mesopotamia_region
						region = madhyadesa_region
						region = pracya_region
					}
				}
				add_province_modifier = {
					name = harvest_winter_modifier
					duration = 91
				}
			}
		}
	}
}

harvest.2 = { #Summer
	type = country_event	
	
	trigger = {
		NOT = { has_global_variable = harvest_summer_var }
	}	
	hidden = yes
	
	immediate = {
		trigger_event = { id = harvest.2 days = 365 }
		set_global_variable = { name = harvest_summer_var value = 1 days = 90 }
		every_province = {
			if = {
				limit = {
					OR = {
						trade_goods = grain
						trade_goods = vegetables
					}
					NOT = {
						region = lower_egypt_region
						region = mesopotamia_region
						region = madhyadesa_region
						region = pracya_region
					}
				}
				add_province_modifier = {
					name = harvest_summer_foodgood_modifier
					duration = 95
				}
			}
			if = {
				limit = {
					trade_goods = fish
				}
				add_province_modifier = {
					name = harvest_summer_fish_modifier
					duration = 95
				}
			}
			if = {
				limit = {
					trade_goods = cattle
				}
				add_province_modifier = {
					name = harvest_summer_animal_modifier
					duration = 95
				}
			}
			if = {
				limit = {
					OR = {
						trade_goods = fur
						trade_goods = wild_game
					}
				}
				add_province_modifier = {
					name = harvest_summer_wildanimal_modifier
					duration = 95
				}
			}
			if = {
				limit = {
					OR = {
						trade_goods = grain
						trade_goods = vegetables
					}
					OR = {
						region = lower_egypt_region
						region = mesopotamia_region
						region = madhyadesa_region
						region = pracya_region
					}
					NOT = {
						terrain = desert
					}
				}
				add_province_modifier = {
					name = harvest_summer_floodplain_modifier
					duration = 95
				}
			}
			if = {
				limit = {
					NOT = {
						trade_goods = fish
						trade_goods = grain
						trade_goods = cattle
						trade_goods = vegetables
						trade_goods = fur
						trade_goods = wild_game
					}
				}
				add_province_modifier = {
					name = harvest_summer_modifier
					duration = 95
				}
			}
		}
	}
}