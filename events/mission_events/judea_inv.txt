namespace = judea_inv

judea_inv.1 = { #Join the Diadochi war
	type = country_event
	title = judea_inv.1.t
	desc = judea_inv.1.desc
	picture = army_desert #is succesors pic dlc bound? If no, take succesors pic

	right_portrait = current_ruler
	left_portrait = c:PRY.current_ruler
	left_portrait = c:EGY.current_ruler

	trigger = {
		religion = judaism
		has_land = yes
	}

	immediate = {
		random_active_war = {
			any_war_participant = c:PRY
			any_war_participant = c:EGY
		}
		save_scope_as = pry_egy_jud_war_scope
	}

	option = { 
		name = judea_inv.1.a
		add_opinion = {
			modifier = 50
			target = c:EGY
		}
		add_opinion = {
			modifier = -50
			target = c:PRY
		}
		hidden_effect = { #on Ptolemaios' side
			trigger_event = {
				id = judea_inv.4
				days = 5
			}
		}
		c:EGY = {
			save_scope_as = war_leader_jud
		}
		set_variable = {
			name = egy_jud
		}

	}
	option = {
		name = judea_inv.1.b
		add_opinion = {
			modifier = -50
			target = c:EGY
		}
		add_opinion = {
			modifier = 50
			target = c:PRY
		}
		hidden_effect = { #On Antigonos' side
			trigger_event = {
				id = judea_inv.3
				days = 5
			}
		}
		c:PRY = {
			save_scope_as = war_leader_jud
		}
		set_variable = {
			name = pry_jud
		}

	}
	option = { #join neither
		name = judea_inv.1.c
		add_political_influence = 25
		add_opinion = {
			modifier = 50
			target = c:PRY
			target = c:EGY
		}
		set_variable = {
			name = no_want_war
		}
	}
}
judea_inv.2 = { 
	type = country_event
	title = judea_inv.2.t
	desc = judea_inv.2.desc
	picture = council_country

	trigger = {
		has_land = yes
	}

	option = { #Give Decapolis and Galilee to Judea/Samaria
		area:decapolis_area = {
			every_area_province = {
				set_owned_by = root
			}
		}
		area:galilee_area = {
			every_area_province = {
				set_owned_by = root
			}
		}
	}
	option = { #Give Philistia and Samaria to Judea/Samaria
		area:philistia_area = {
			every_area_province = {
				set_owned_by = root
			}
		}
		area:samaria_area = {
			every_area_province = {
				set_owned_by = root
			}
		}
	}
	option = { #Betray and give no land
		if = {
			limit = { alliance_with = c:JUD }
			break_alliance = c:JUD
		}
		add_opinion = {
			modifier = -100
			target = c:JUD
		}
		root = {
			area:philistia_area = {
				every_area_province = {
					add_claim = root
				}
			}
		}
	}
}
judea_inv.3 = { #Join Antigonos
	type = country_event
	title = judea_inv.3.t
	desc = judea_inv.3.desc
	picture = army_desert

	right_portrait = c:EGY.current_ruler
	left_portrait = c:PRY.current_ruler
	left_portrait = ROOT.current_ruler

	trigger = {
		has_land = yes
	}

	option = {
		name = judea_inv.3.a
		add_to_war = {
			target = scope:pry_egy_jud_war_scope
			attacker = no #on Antigonos' side
		}
		root = {
			trigger_event = {
				id = judea_inv.5
				days = -1
			}
		}
	}
	option = {
		name = judea_inv.3.b
		root = {
			set_variable = {
				name = no_want_war
				days = -1
			}
		}
	}

}
judea_inv.4 = { #Join Ptolemaios
	type = country_event
	title = judea_inv.4.t
	desc = judea_inv.4.desc
	picture = great_city

	left_portrait = c:EGY.current_ruler
	right_portrait = c:PRY.current_ruler
	left_portrait = ROOT.current_ruler

	trigger = {
		has_land = yes
	}

	option = {
		name = judea_inv.4.a
		add_to_war = {
			target = scope:pry_egy_jud_war_scope
			attacker = yes #on Egypt's side
		}
		root = {
			trigger_event = {
				id = judea_inv.5
				days = -1
			}
		}
	}
	option = {
		name = judea_inv.4.b
		root = {
			set_variable = {
				name = no_want_war
				days = -1
			}
		}
	}
}
judea_inv.5 = { #Answer War
	type = country_event
	title = judea_inv.5.t
	desc = {
        desc = judea_inv.5.desc
        first_valid = {
            triggered_desc = { # Positive
                trigger = { 
                    any_active_war = {
						AND = {
							OR = {
								any_war_participant = c:JUD
								any_war_participant = c:SMA
							}
							OR = {
								any_war_participant = c:EGY
								any_war_participant = c:PRY
							}
						}
					}
                }
                desc = judea_inv.5.desc_1
            }
            triggered_desc = { # Other
                trigger = { always = yes }
                desc = judea_inv.5.desc_2
            }
        }
    }
	picture = great_city

	trigger = {
		has_land = yes
	}

	option = {
		name = judea_inv.5.a
		add_manpower = 1000
	}

}
judea_inv.6 = {							# Nabataea vassalage
    type = country_event
    title = judea_inv.6.t
    desc = judea_inv.6.desc
    picture = caravan
    left_portrait = current_ruler
    right_portrait = c:NBT.current_ruler

    trigger = { 
        has_land = yes
    }

    option = {      
        name = judea_inv.6.a
        custom_tooltip = judea_inv.6.a.tt
        if = {
            limit = {
                exists = c:NBT
            }
            c:NBT = {
                trigger_event = { id = judea_inv.7 }
            }
        }
        else = {
            p:4860 = { add_claim = root }
        }
    }
}
judea_inv.7 = {                           # Feudatory - Nabataea side
    type = country_event
    title = judea_inv.7.t
    desc = judea_inv.7.desc
    picture = council_country
    left_portrait = current_ruler
    right_portrait = c:NBT.current_ruler

    trigger = {
        has_land = yes
    }  

    immediate = { save_scope_as = korkyra_scope }

    option = { #feudatory
        name = judea_inv.7.a
        c:NBT = {
            make_subject = {
                type = feudatory
                target = root
            }
        }
        ai_chance = {
            factor = 1
            modifier = {
                factor = 2
                opinion >= 50 
            }
            modifier = {
                factor = 3
                opinion >= 100
            }
        }
    }

    option = { #refusal
        name = judea_inv.7.b
        c:NBT.capital_scope = { add_claim = root }
        ai_chance = {
            factor = 1
            modifier = {
                factor = 1.5
                opinion <= 0
            }
            modifier = {
                factor = 2
                opinion <= -100
			}
			modifier = {
                factor = 3
                opinion <= -150
            }
        }
    }

    after = {
        root = {
            trigger_event = { 
                id = judea_inv.8 
                days = 5
            }
        }
    }
}
judea_inv.8 = {                           # Nabataea vassal - Response
    type = country_event
    title = judea_inv.8.t
    desc = {
        desc = judea_inv.8.desc
        first_valid = {
            triggered_desc = { # Positive
                trigger = { 
                    c:NBT = { is_subject_of = root }
                }
                desc = judea_inv.8.desc_1
            }
            triggered_desc = { # Other
                trigger = { always = yes }
                desc = judea_inv.8.desc_2
            }
        }
    }
    picture = council_country
    left_portrait = current_ruler
    right_portrait = c:NBT.current_ruler

    trigger = {
        has_land = yes
    }  

    immediate = {
        if = {
            limit = {
                c:NBT = { is_subject_of = root }
            }
            show_as_tooltip = {
                make_subject = {
                    type = feudatory
                    target = c:NBT
                }
            }
        }
        else = {
            p:4860 = { add_claim = root }
        }
    }

    option = {
        name = judea_inv.8.a
        trigger = { 
            c:NBT = { is_subject_of = root }
        }
    }

    option = {
        name = judea_inv.8.b
        trigger = { 
            c:NBT = { is_subject = no }
        }
    }
}
judea_inv.9 = { #Hidden event to remove the feudatory permanent buff
	type = country_event
	hidden = yes

	trigger = {
		NOT = {
			c:HBR = {
				is_subject_of = root
			}
		}
	}

	immediate = {
		remove_country_modifier = judea_modifier_15
	}
}
judea_inv.10 = { #if Babylon flourishes again the modifier is in the wrong place...
	type = province
	hidden = yes

	trigger = {
		p:918 = {
			NOT = {
				has_province_rank = settlement
			}
		}
	}

	immediate = {
		p:918 = {
			remove_province_modivier = judea_modifier_12
		}
	}
}
judea_inv.11 = { #Metropolis Building Event 1
	type = country_event
	title = judea_inv.11.t
	desc = judea_inv.11desc
	picture = city_construction

	trigger = {
		religion = judaism
	}

	immediate = {

	}

	option = {
		name = judea_inv.11.a
	}

}
judea_inv.12 = { #Metropolis Building Event 2
	type = country_event
	title = judea_inv.12.t
	desc = judea_inv.12.desc
	picture = great_city

	trigger = {
		religion = judaism
	}

	immediate = {

	}

	option = {
		name = judea_inv.12.a
	}
}
judea_inv.13 = { #Metropolis Building Event 3
	type = country_event
	title = judea_inv.13.t
	desc = judea_inv.13.desc
	picture = great_city

	trigger = {
		religion = judaism
	}

	immediate = {

	}

	option = {
		name = judea_inv.13.a
	}

}
judea_inv.14 = { #Flavour after having Holy Sites everywhere
	type = country_event
	title = judea_inv.14.t
	desc = judea_inv.14.desc
	picture = religious_rite

	trigger = {
		religion = judaism
	}

	immediate = {

	}

	option = {
		name = judea_inv.14.a

	}
}
judea_inv.15 = { #Ark of the Covenant
	type = country_event
	title = judea_inv.15.t
	desc = judea_inv.15.desc
	picture = religious_rite
	
	left_portrait = current_ruler

	trigger = {
		religion = judaism
	}

	option = {
		name = judea_inv.15.a
		create_country_treasure = {
			key = ark_of_the_covenant
			icon = ark_of_covenant 
			modifier = {
				local_population_happiness = 0.15 #temporary effect
			}
		}
	}
}

