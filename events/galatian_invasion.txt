namespace = galatian_invasion


galatian_invasion.1 = { # AI gateway check
	type = country_event
	# title = "galatian_invasion.1.t"
	# desc = "galatian_invasion.1.desc"
	hidden = yes
	
	trigger = {
		c:SDI = {
			is_ai = yes
		}
		c:DRD = {
			is_ai = yes
		}
		c:TBL = {
			is_ai = yes
		}
		
		# has_global_variable = fourth_war_triggered
		# OR = {
			# current_date > 1.1.470
			# c:SEL = {
				# any_owned_province = {
					# is_in_region = galatia_region
				# }
			# }
		# }

	}
	
	fire_only_once = yes
	
	immediate = {
		c:SDI = { # Serdica
			save_scope_as = pella_attacker
		}
		
		c:DRD = { # Dardania
			save_scope_as = delphi_attacker
		}
		
		c:TBL = {
			save_scope_as = phrygia_attacker
		}
	}	
	
	option = {
		# name = galatian_invasion.1.a
	}
	
	after = {
		trigger_event = {
			id = galatian_invasion.2
			# days = 1
		}
	}
}

galatian_invasion.2 = { # Barbarian Rumblings
	type = country_event
	title = "galatian_invasion.2.t"
	desc = "galatian_invasion.2.desc"
	
	left_portrait = scope:pella_attacker.current_ruler
	left_portrait = scope:delphi_attacker.current_ruler
	left_portrait = scope:phrygia_attacker.current_ruler
	right_portrait = current_ruler
	
	trigger = {
		country_culture_group = hellenic
	}
	
	immediate = {

	}	
	
	option = {
		name = galatian_invasion.2.a
		
		trigger_event = {
			id = galatian_invasion.10
			days = 1 #30
		}
		trigger_event = {
			id = galatian_invasion.20
			days = 1 #60
		}
		trigger_event = {
			id = galatian_invasion.30
			days = 1 #90
		}
	}
}

galatian_invasion.10 = {
	type = country_event
	title = "galatian_invasion.10.t"
	desc = "galatian_invasion.10.desc"
	
	left_portrait = scope:pella_attacker.current_ruler
	right_portrait = scope:pella_defender.current_ruler
	goto_location = root
	
	trigger = {
		owns = 379
	}
	
	immediate = { # Serdicans invade
	
		c:SDI = { # Serdica
			save_scope_as = pella_attacker
		}
		
		random_country = {
			limit = {
				owns = 379
			}
			save_scope_as = pella_defender
		}
		
		scope:pella_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:379
				target = scope:pella_defender
			}
			create_unit = {
				navy = no
				location = p:384 
				while = {
					count = 39
					add_subunit = light_infantry
				}
				while = {
					count = 10
					add_subunit = chariots
				}
			}
			# save_scope_as = first_gauls
		}
	}
	
	option = {
		name = galatian_invasion.10.a
	}
		
	# option = {
		# name = galatian_invasion.2.b # 

	# }
	
	after = {
		c:TRE = {
			trigger_event = {
				id = galatian_invasion.11
				days = 1
			}
		}
		
		every_country = {
			limit = {
				country_culture_group = hellenic
			}
			trigger_event = {
				id = galatian_invasion.12
				days = 3
			}
		}

	}
	
}

galatian_invasion.11 = { # Help from Thrace
	type = country_event
	title = "galatian_invasion.11.t"
	desc = "galatian_invasion.11.desc"
	
	trigger = {
		tag = TRE 
	}
	
	# immediate = {

	# }	
	
	option = {
		name = galatian_invasion.11.a
	}

}

galatian_invasion.12 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.12.t"
	desc = "galatian_invasion.12.desc"
	
	left_portrait = scope:pella_attacker.current_ruler
	right_portrait = scope:pella_defender.current_ruler
	
	trigger = {
		country_culture_group = hellenic
		NOT = {	owns = 379 }
		NOT = { tag = TRE }
	}
	
	# immediate = {

	# }	
	
	option = {
		name = galatian_invasion.12.a
	}

}

galatian_invasion.20 = { # Second Wave
	type = country_event
	title = "galatian_invasion.20.t"
	desc = "galatian_invasion.20.desc"
	
	left_portrait = scope:delphi_attacker.current_ruler
	right_portrait = scope:delphi_defender.current_ruler
	goto_location = root
	
	trigger = {
		owns = 424
	}
	
	immediate = { #  invade
	
		random_country = {
			limit = {
				any_owned_province = { province_id = 424 }
			}
			save_scope_as = delphi_defender
		}
		
		scope:delphi_attacker = {
			add_military_access = c:MAC
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:424
				target = scope:delphi_defender
				# save_scope_as = second_galatian_war
			}
			create_unit = {
				navy = no
				location = p:475 
				while = {
					count = 39
					add_subunit = light_infantry
				}
				while = {
					count = 10
					add_subunit = chariots
				}
			}
			# save_scope_as = second_gauls	
		}
		
	}
	
	option = {
		name = galatian_invasion.20.a 
		
		random_country = {
			limit = {
				capital_scope = {
					OR = {
						is_in_area = boeotia_area
						is_in_area = central_greece_area
						is_in_area = aetolia_area
					}
				}
				is_subject = no
				NOT = { owns = 424 }
			}
			trigger_event = {
				id = galatian_invasion.21
				days = 1
			}
		}
	}
	
	after = {
		
		every_country = {
			limit = {
				capital_scope = {
					OR = {
						is_in_area = boeotia_area
						is_in_area = central_greece_area
						is_in_area = aetolia_area
					}
				}
			}
			trigger_event = {
				id = galatian_invasion.21
				days = 1
			}
		}
		every_country = {
			limit = {
				country_culture_group = hellenic
			}
			trigger_event = {
				id = galatian_invasion.22
				days = 3
			}
		}
	}
	
}

galatian_invasion.21 = { # Help from Greeks
	type = country_event
	title = "galatian_invasion.21.t"
	desc = "galatian_invasion.21.desc"
	
	left_portrait = scope:delphi_attacker.current_ruler
	right_portrait = scope:delphi_defender.current_ruler
	right_portrait = current_ruler
	goto_location = root
	
	trigger = {
		is_subject = no
		NOT = { owns = 424 }
	}
	
	immediate = {
		random_current_war = {
			limit = {
				AND = {
					any_war_attacker = { this = scope:delphi_attacker }
					any_war_defender = { this = scope:delphi_defender }
				}
			}
			save_scope_as = second_galatian_war_scope
		}
		
		# random_country = {
			# limit = { this = root }
			# save_scope_as = friend_of_delphi
		# }
	}	
	
	option = {
		name = galatian_invasion.21.a
		
		# scope:friend_of_delphi = {
		# every_country = {
			# limit = { 
				# capital_scope = {
					# OR = {
						# is_in_area = boeotia_area
						# is_in_area = central_greece_area
						# is_in_area = aetolia_area
					# }
				# }
				# is_subject = no
				# NOT = { owns = 424 }
			# }
			
			add_to_war = {
				target = scope:second_galatian_war_scope
				leader = no 
				attacker = no
			}
			set_variable = {
				name = defender_of_delphi
				value = 1
			}
		# }
	}
	
}

galatian_invasion.22 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.22.t"
	desc = "galatian_invasion.22.desc"
	
	left_portrait = scope:delphi_attacker.current_ruler
	right_portrait = scope:delphi_defender.current_ruler
	
	trigger = {
		country_culture_group = hellenic
		NOT = {	has_variable = defender_of_delphi }
	}
	
	# immediate = {

	# }	
	
	option = {
		name = galatian_invasion.22.a
	}

}

galatian_invasion.30 = { # Third Wave
	type = country_event
	title = "galatian_invasion.30.t"
	desc = "galatian_invasion.30.desc"
	
	left_portrait = scope:phrygia_attacker.current_ruler
	right_portrait = scope:phrygia_defender.current_ruler
	goto_location = root
	
	trigger = {
		owns = 189
	}
	
	immediate = { #  invade
	
		random_country = {
			limit = {
				any_owned_province = { province_id = 189 }
			}
			save_scope_as = phrygia_defender
		}
		
		scope:phrygia_attacker = {
			# add_military_access = 
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:189
				target = scope:phrygia_defender
			}
			create_unit = {
				navy = no
				location = p:189 
				while = {
					count = 79
					add_subunit = light_infantry
				}
				while = {
					count = 20
					add_subunit = chariots
				}
				# save_scope_as = third_gauls
			}
			
		}
		
	}
	
	option = {
		name = galatian_invasion.30.a 
	}

	after = {
		every_country = {
			limit = {
				country_culture_group = hellenic
			}
			trigger_event = {
				id = galatian_invasion.32
				days = 3
			}
		}
	}

	# option = {
		# name = galatian_invasion.32.b 
	# }
	
}


galatian_invasion.32 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.32.t"
	desc = "galatian_invasion.32.desc"
	
	left_portrait = scope:phrygia_attacker.current_ruler
	right_portrait = scope:phrygia_defender.current_ruler
	
	trigger = {
		country_culture_group = hellenic
		NOT = {	owns = 189 }
	}
	
	# immediate = {

	# }	
	
	option = {
		name = galatian_invasion.32.a
	}

}
