scythia_mission_01_greek_stance = {
    icon = macedon_4
	header = mission_image_macedon

    repeatable = no

    chance = {
        factor = 3
    }

    potential = {
        NOT = { has_variable = scythia_mission_01_greek_stance } ### update
        tag = SCY
        has_civil_war = no
    }

    abort = {
        OR = {
            NOT = { tag = SCY }
	        ai_mission_back_out_trigger = yes
        }
    }

    on_start = {
        start_mission_ai_effect = yes
		save_scope_as = me_scythia_scope
        random_family = {
			weight = {
				modifier = {
					factor = 1000
					any_family_member = {
						count = all
						from_ruler_family = no
					}
				}
			}
			save_scope_as = monarchy_family
		}
		trigger_event = me_scythia_01_greek_stance.1 ### need to write
    }

    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = scythia_mission_01_greek_stance
            days = 7300
        }
    }

    on_completion = {
        add_3_free_province_investments = yes
        complete_mission_effect = yes
		trigger_event = me_scythia_01_greek_stance.2 ### need to write
    }

    scythia_mission_01_greek_stance_task_1 = { # Task 1 - To Be or Not To Be Greek
        icon = "task_political"

        duration = 365

        allow = {
           political_influence >= 30
        }

		on_start = {
			trigger_event = {
				id = me_scythia_01_greek_stance.3	 ### update 3 events 
				days = { 70 130 }
			}
			trigger_event = {
				id = me_scythia_01_greek_stance.4	 ### update 3 events 
				days = { 170 230 }
			}
			trigger_event = {
				id = me_scythia_01_greek_stance.5	 ### update 3 events 
				days = { 270 330 }
			}
			add_political_influence = -30
			set_variable = {
				name = ongoing_mission_pulse_flag
				days = 365
			}
		}

        on_completion = {  

		}
    }

    scythia_mission_01_greek_stance_task_2 = { # They Will Join Us
    	requires = { scythia_mission_01_greek_stance_task_1 }

        icon = "task_diplomatic"

        prevented_by = { scythia_mission_01_greek_stance_task_12  }

        duration = 365

        allow = {
            treasury >= 100
			manpower >= 2
        }

        
        on_start = {
			trigger_event = {
				id = me_scythia_01_greek_stance.7	
				days = { 70 130 }
			}
			trigger_event = {
				id = me_scythia_01_greek_stance.8	  
				days = { 170 230 }
			}
			trigger_event = {
				id = me_scythia_01_greek_stance.9	 
				days = { 270 330 }
			}
			add_political_influence = -30
			set_variable = {
				name = ongoing_mission_pulse_flag
				days = 365
			}
		}
        
		on_completion = {
			custom_tooltip = scythia_01_greek_stance_2_reward_tt    ### need to write
		}
		
		#bypass = {
		#	has_variable = congress_bypass
		#}

    }

    scythia_mission_01_greek_stance_task_3 = { # Trade Requires Ports
        requires = { scythia_mission_01_greek_stance_task_2 }

        icon = "task_economical"

        allow = {
            capital_scope = {  #owns = 6144
                num_of_port_building >= 3
                num_of_commerce_building >= 1 
            } 
		}

        highlight = {
			scope:province = {
				owner = root
				is_capital = yes
			}
		}

        on_completion = {
			capital_scope = {
				add_province_modifier = {
					name = me_scy_1_3_pmod   # need to write
					duration = 7300 # 20 years
				}
			}
		}
    }

    scythia_mission_01_greek_stance_task_4 = { # Butting Heads With the Bosporans
    	requires = { scythia_mission_01_greek_stance_task_3 }

        icon = "task_political"

        allow = {
			exists = c:BPK
            NOT = {
                has_truce_with = BPK
			}
		}
        
        on_completion = {
			trigger_event = { id = me_scythia_01_greek_stance.10 }  ### need to write
		}
    }

    scythia_mission_01_greek_stance_task_5 = { # Build It And They Will Come
    	requires = { scythia_mission_01_greek_stance_task_2 }

        icon = "task_economical"

        duration = 1095

        allow = {
			owns = 4535
            owns = 4545
            owns = 4547
            owns = 4548
			treasury >= 400
            political_influence >= 100
		}
       
        highlight = {
			scope:province = {
				OR = {
					province_id = 4535
					province_id = 4545
					province_id = 4547
					province_id = 4548
				}
			}
		}

        on_start = {
			trigger_event = { id = me_scythia_01_greek_stance.11 }  ### need to write
			set_variable = {
				name = ongoing_mission_pulse_flag
				days = 1095
			}
		}

		on_completion = {
			trigger_event = { id = me_scythia_01_greek_stance.12 } ### need to write
			custom_tooltip = scythia_01_greek_stance_5_reward_tt   ### need to write
		}
    }

    scythia_mission_01_greek_stance_task_6 = { # Abandon Tribal Ways
    	requires = { scythia_mission_01_greek_stance_task_5 }

        icon = "task_economical"

        allow = {
			has_law = coin_minting_law
			has_law = absolute_authority
			has_law = formalized_industry_law_tribal
		}
        
        on_completion = {
            current_ruler = { add_popularity = popularity_small  }
			add_country_modifier = {
				name = me_scy_1_6_cmod      ### need to write +5 loyalty characters & +5% monthly centralization
				duration = 7300 # 20 years
			}
        }
    }

    scythia_mission_01_greek_stance_task_7 = { # Invite the Greeks
    	requires = { scythia_mission_01_greek_stance_task_2 }

        icon = "task_diplomatic"

        duration = 180

        allow = {
			political_influence >= 50
            has_law = syncretization_law_tribal
			capital_scope = {
                has_building = temple_building
                has_building = theathre_building
            }
		}

        on_start = {
			trigger_event = { id = me_scythia_01_greek_stance.13 }  ### need to write
			set_variable = {
				name = ongoing_mission_pulse_flag
				days = 180
			}
		}

		on_completion = {
			trigger_event = { id = me_scythia_01_greek_stance.14 } ### need to write
			custom_tooltip = scythia_01_greek_stance_7_reward_tt   ### need to write
		}
    }

    scythia_mission_01_greek_stance_task_8 = { # Embrace Hellenism
    	requires = { scythia_mission_01_greek_stance_task_7 }

        icon = "task_political"

        duration = 365

        allow = {
            is_subject = no
			num_of_cities >= 5
        }

        monthly_on_action = scythian_1_greek_stance_embrace_hellenism_monthly_pulse     ### need to write - list of 6 different events

		on_start = {
			set_variable = {
				name = ongoing_mission_pulse_flag
				days = 365
			}
		}

		on_completion = {
			trigger_event = { id = me_scythia_01_greek_stance.15 } ### need to write
		}
        
    }

    scythia_mission_01_greek_stance_task_9 = { # A Greek Heritage
    	requires = { scythia_mission_01_greek_stance_task_7 }

        icon = "task_political"

        allow = {
			owns = 4532
            p:4532 = {
                has_city_status = no
                is_holy_site = no
            }
			treasury >= 100
            political_influence >= 50
		}

        on_completion = {
			trigger_event = { id = me_scythia_01_greek_stance.16 } ### need to write
			custom_tooltip = scythia_01_greek_stance_9_reward_tt   ### need to write
		}


    }

    scythia_mission_01_greek_stance_task_10 = { # Hold the Euxinus Games
    	requires = { scythia_mission_01_greek_stance_task_8 }

        icon = "task_diplomatic"

        
    }

    scythia_mission_01_greek_stance_task_11 = { # Crown the Basileus
        requires = { scythia_mission_01_greek_stance_task_6 scythia_mission_01_greek_stance_task_10 }

        icon = "task_political"

        allow = {
            stability >= 50
        }

        on_completion = {
            change_heritage = hellenized_barbarian_heritage     ### need to write heritage. Not sure if this function will work.
			###     The following was taken directly from the tribal reform mission
            change_government = theocratic_monarchy		###		should this be a religious or despotic monarchy instead? Aristocratic implies relying on the nobility
			switch_government_type_event_clearup_effect = yes
			if = {
				limit = {
					exists = scope:monarchy_family
					scope:monarchy_family = {
						any_family_member = {
							is_adult = yes
							trigger_if = {
								limit = {
									root = {
										gender_equality = no
									}
								}
								is_male = yes
							}
							has_any_office = no
						}
					}
				}
				custom_tooltip = grant_offices_monarchy_reform_tt
				hidden_effect = {
					if = {
						limit = {
							scope:monarchy_family = {
								any_family_member = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
							}
							office_is_empty = office_foreign_minister
						}
						scope:monarchy_family = {
							random_family_member = {
								limit = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
								weight = {
									modifier = {
										factor = {
											value = 1
											add = charisma
										}
									}
								}
								give_office = office_foreign_minister
							}
						}
					}
					if = {
						limit = {
							scope:monarchy_family = {
								any_family_member = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
							}
							office_is_empty = office_marshal
						}
						scope:monarchy_family = {
							random_family_member = {
								limit = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
								weight = {
									modifier = {
										factor = {
											value = 1
											add = martial
										}
									}
								}
								give_office = office_marshal
							}
						}
					}
					if = {
						limit = {
							scope:monarchy_family = {
								any_family_member = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
							}
							office_is_empty = office_high_priest_monarchy
						}
						scope:monarchy_family = {
							random_family_member = {
								limit = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
								weight = {
									modifier = {
										factor = {
											value = 1
											add = zeal
										}
									}
								}
								give_office = office_high_priest_monarchy
							}
						}
					}
				}
			}
		}
    }

    scythia_mission_01_greek_stance_task_12 = { # They Will Die
        requires = { scythia_mission_01_greek_stance_task_1 }

        icon = "task_expansion"

        prevented_by = { scythia_mission_01_greek_stance_task_2  }

        #look at paper kingdom for claims
    }

    scythia_mission_01_greek_stance_task_13 = { # Unify The Scythian People
        requires = { scythia_mission_01_greek_stance_task_12 }

        icon = "task_expansion"

        
    }

    scythia_mission_01_greek_stance_task_14 = { # Sacrifice the Greeks
        requires = { scythia_mission_01_greek_stance_task_12 }

        icon = "task_expansion"

        
    }

    scythia_mission_01_greek_stance_task_15 = { # They Are Beneath Us
        requires = { scythia_mission_01_greek_stance_task_14 }

        icon = "task_expansion"

        
    }

    scythia_mission_01_greek_stance_task_16 = { # The Taurian Cliffs
        requires = { scythia_mission_01_greek_stance_task_14 }

        icon = "task_economical"

        
    }

    scythia_mission_01_greek_stance_task_17 = { # The Great Horde
        requires = { scythia_mission_01_greek_stance_task_15 }

        icon = "task_expansion"

        
    }

    scythia_mission_01_greek_stance_task_18 = { # Burn Their Cities
        requires = { scythia_mission_01_greek_stance_task_15 }

        icon = "task_expansion"

        duration = 180

        
    }

    scythia_mission_01_greek_stance_task_19 = { # Shouldering the Tyras
        requires = { scythia_mission_01_greek_stance_task_16 }

        icon = "task_expansion"

        
    }

    scythia_mission_01_greek_stance_task_20 = { # They Can Only Be Slaves
        requires = { scythia_mission_01_greek_stance_task_19 }

        icon = "task_expansion"

        
    }

    scythia_mission_01_greek_stance_task_21 = { # A Second Golden Age
        requires = { scythia_mission_01_greek_stance_task_17 scythia_mission_01_greek_stance_task_18 scythia_mission_01_greek_stance_task_20 }

        icon = "task_expansion"

        
    }

    scythia_mission_01_greek_stance_task_22 = { # Luxuries Are Necessities
        icon = "task_expansion"

	    duration = 180

        
    }

    scythia_mission_01_greek_stance_task_23 = { # Man The Walls
        requires = { scythia_mission_01_greek_stance_task_22 }

        icon = "task_political"

        
    }

    scythia_mission_01_greek_stance_task_24 = { # Ready The Horse Lords
        requires = { scythia_mission_01_greek_stance_task_22 }

        icon = "task_political"

        
    }

    scythia_mission_01_greek_stance_task_25 = { # They Feed From Our Palms
        requires = { scythia_mission_01_greek_stance_task_23 scythia_mission_01_greek_stance_task_24 }

	    duration = 180

        icon = "task_diplomatic"

        
    }
}
