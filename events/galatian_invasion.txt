namespace = galatian_invasion


galatian_invasion.1 = { # AI gateway check
	type = country_event
	# title = "galatian_invasion.1.t"
	# desc = "galatian_invasion.1.desc"
	hidden = yes
	
	trigger = {
		
		OR = {
			AND = {
				current_date > 455.1.1
				c:MAC = {
					NOT = { owns = 379 }
				}
			}
			c:SEL = {
				any_owned_province = {
					is_in_region = galatia_region
				}
			}
			current_date > 470.1.1
		}
	}
	
	fire_only_once = yes
	
	immediate = {

	}	
	
	option = {
		# name = galatian_invasion.1.a
	}
	
	after = {
		trigger_event = {
			id = galatian_invasion.2
			# days = 1
		}
	}
}

galatian_invasion.2 = { # Barbarian Rumblings
	type = country_event
	title = "galatian_invasion.2.t"
	desc = "galatian_invasion.2.desc"
	picture = gallic_clan_chiefs_discussing # aka celtic_chiefs
	# picture = gallic_village_scene # aka celtic_village # too serene
	# picture = gauls_interacting_negotiating # out of place; maybe for peace deals
	# picture = looting #soldiers look roman
	# picture = walled_city_under_siege #aka city_siege
	# picture = elephant_battle
	
	left_portrait = scope:pella_attacker.current_ruler
	left_portrait = scope:delphi_attacker.current_ruler
	left_portrait = scope:tylis_attacker.current_ruler
	right_portrait = scope:tavium_attacker.current_ruler
	right_portrait = scope:ankyra_attacker.current_ruler
	right_portrait = scope:pessinous_attacker.current_ruler
	# right_portrait = current_ruler
	
	trigger = {

	}
	
	immediate = {
		if ={
			limit = {
				c:DND = { exists = yes }
			}
			c:DND = {  # Dindaria
				save_scope_as = pella_attacker
			}
		}
		else = {
			random_country = {
				limit = {
					country_culture_group = gallic
					capital_scope = {
						OR = {
							is_in_region = macedonia_region
							is_in_region = moesia_region
							is_in_region = pannonia_region
						}
					}
				}
				save_scope_as = pella_attacker
			}
		}
		if ={
			limit = { # Scordiscia
				c:SCD = { exists = yes }
			}
			c:SCD = { # Dardania
				save_scope_as = delphi_attacker
			}
		}
		else = {
			random_country = {
				limit = {
					country_culture_group = gallic
					capital_scope = {
						OR = {
							is_in_region = macedonia_region
							is_in_region = moesia_region
							is_in_region = pannonia_region
						}
					}
					NOT = { this = scope:pella_attacker }
				}
				save_scope_as = delphi_attacker
			}
		}
		if ={
			limit = { # Scordiscia
				c:X12 = { exists = yes }
			}
			c:X12 = { # Dardania
				save_scope_as = tylis_attacker
			}
		}
		else = {
			random_country = {
				limit = {
					country_culture_group = gallic
					capital_scope = {
						OR = {
							is_in_region = macedonia_region
							is_in_region = moesia_region
							is_in_region = pannonia_region
						}
					}
					NOR = {
						this = scope:pella_attacker
						this = scope:delphi_attacker
					}
				}
				save_scope_as = delphi_attacker
			}
		}
		if ={
			limit = {
				c:X09 = { exists = yes }
			}
			c:X09 = { # Trocmeria
				save_scope_as = tavium_attacker
			}
		}
		# else = {
			# random_country = {
				# limit = {
					# country_culture_group = gallic
					# capital_scope = {
						# OR = {
							# is_in_region = macedonia_region
							# is_in_region = moesia_region
							# is_in_region = pannonia_region
						# }
					# }
					# NOR = {
						# this = scope:pella_attacker
						# this = scope:delphi_attacker
					# }
				# }
				# save_scope_as = phrygia_attacker
			# }
		# }
		if ={
			limit = {
				c:X08 = { exists = yes }
			}
			c:X08 = { # Tolistobogia
				save_scope_as = pessinous_attacker
			}
		}
		# else = {
			# random_country = {
				# limit = {
					# country_culture_group = gallic
					# capital_scope = {
						# OR = {
							# is_in_region = macedonia_region
							# is_in_region = moesia_region
							# is_in_region = pannonia_region
						# }
					# }
					# NOR = {
						# this = scope:pella_attacker
						# this = scope:delphi_attacker
					# }
				# }
				# save_scope_as = phrygia_attacker_2
			# }
		# }
		if ={
			limit = {
				c:X07 = { exists = yes }
			}
			c:X07 = { # Tectosagia
				save_scope_as = ankyra_attacker
			}
		}
		# else = {
			# random_country = {
				# limit = {
					# country_culture_group = gallic
					# capital_scope = {
						# OR = {
							# is_in_region = macedonia_region
							# is_in_region = moesia_region
							# is_in_region = pannonia_region
						# }
					# }
					# NOR = {
						# this = scope:pella_attacker
						# this = scope:delphi_attacker
					# }
				# }
				# save_scope_as = phrygia_attacker
			# }
		# }
	}	
	
	option = {
		name = galatian_invasion.2.a
		
		trigger_event = {
			id = galatian_invasion.10
			days = 30
		}
		trigger_event = {
			id = galatian_invasion.20
			days = 60
		}
		trigger_event = {
			id = galatian_invasion.25
			days = 75
		}
		trigger_event = {
			id = galatian_invasion.30
			days = 90
		}
	}
}

galatian_invasion.10 = {
	type = country_event
	title = "galatian_invasion.10.t"
	desc = "galatian_invasion.10.desc"
	# picture = gallic_clan_chiefs_discussing # aka celtic_chiefs
	picture = walled_city_under_siege #aka city_siege
	# picture = elephant_battle
	
	left_portrait = scope:pella_attacker.current_ruler
	right_portrait = scope:pella_defender.current_ruler
	goto_location = root
	
	trigger = {
		owns = 379
	}
	
	immediate = { # invade
	
		random_country = {
			limit = {
				owns = 379
			}
			save_scope_as = pella_defender
		}
		
		scope:pella_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:379
				target = scope:pella_defender
			}
			create_unit = {
				navy = no
				location = p:384 
				commander = scope:pella_attacker.current_ruler
				while = {
					count = 39
					add_subunit = light_infantry
				}
				while = {
					count = 10
					add_subunit = chariots
				}
			}
			# save_scope_as = first_gauls
		}
		
		random_current_war = {
			limit = {
				any_war_attacker = { this = scope:pella_attacker }
				any_war_defender = { this = scope:pella_defender }
			}
			save_scope_as = first_galatian_war_scope
		}
	}
	
	option = {
		name = galatian_invasion.10.a
	}
		
	# option = {
		# name = galatian_invasion.2.b # 

	# }
	
	after = {
		c:TRE = {
			trigger_event = {
				id = galatian_invasion.11
				days = 1
			}
		}
		
		every_country = {
			limit = {
				country_culture_group = hellenic
			}
			trigger_event = {
				id = galatian_invasion.12
				days = 3
			}
		}

	}
	
}

galatian_invasion.11 = { # Help from Thrace
	type = country_event
	title = "galatian_invasion.11.t"
	desc = "galatian_invasion.11.desc"
	# picture = looting #soldiers look roman
	picture = walled_city_under_siege #aka city_siege
	# picture = elephant_battle
	
	trigger = {
		tag = TRE 
		is_ai = no
	}
	
	# immediate = {

	# }	
	
	option = {		
		name = galatian_invasion.11.a
		
		add_to_war = {
			target = scope:first_galatian_war_scope
			leader = no 
			attacker = no
		}
		
	}
	
	option = {		
		name = galatian_invasion.11.b
		
	}

}

galatian_invasion.12 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.12.t"
	desc = "galatian_invasion.12.desc"
	# picture = looting #soldiers look roman
	picture = walled_city_under_siege #aka city_siege
	# picture = elephant_battle
	
	left_portrait = scope:pella_attacker.current_ruler
	right_portrait = scope:pella_defender.current_ruler
	
	trigger = {
		country_culture_group = hellenic
		NOT = {	owns = 379 }
		NOT = { tag = TRE }
	}
	
	# immediate = {

	# }	
	
	option = {
		name = galatian_invasion.12.a
	}

}

galatian_invasion.13 = { # Setting - Start Task
	type = country_event
	title = "galatian_invasion.13.t"
	desc = "galatian_invasion.13.desc"
	picture = gallic_village_scene # aka celtic_village # too serene
	right_portrait = current_ruler
	
	fire_only_once = yes
	
	trigger = {
		country_culture_group = gallic
		any_owned_province = {
			is_in_region = macedonia_region
		}
		is_ai = yes
	}
	
	immediate = {
		
		random_country = {
			limit = {
				country_culture_group = gallic
				any_owned_province = {
					is_in_region = macedonia_region
				}
				is_ai = yes
			}
			save_scope_as = migrating_nation
		}
	}
	
	option = {
		name = galatian_invasion.13.a
		
		scope:migrating_nation = {
			while = {
				count = { 20 }
				if = {
					limit = {
						NOR = { has_variable = pella_chosen_city }
						any_owned_province = {
							OR = {
								is_in_region = moesia_region
								is_in_region = illyria_region
								is_in_region = pannonia_region
								is_in_region = dacia_region
							}
							province_dominant_culture_group = gallic
						}
					}
					random_owned_province = {
						limit = {
							NOT = { has_variable = pella_chosen_city }
							OR = {
								is_in_region = moesia_region
								is_in_region = illyria_region
								is_in_region = pannonia_region
								is_in_region = dacia_region
							}
							province_dominant_culture_group = gallic
						}
						set_variable = pella_chosen_city
					
						trigger_event = {
							id = galatian_invasion.14
							days = 3 
						}
					}
				}
			}
		}
	}
	
}


galatian_invasion.14 = { # Settling
    type = province_event
    hidden = yes
	

	trigger = {

	}
	
	immediate = {
		
		# scope:migrating_nation = {
			# random_owned_province = {
		random_ownable_province = {
			limit = {
				is_in_region = macedonia_region
				trigger_if = {
					limit = {
						exists = owner
					}
					owner = scope:migrating_nation
				}
			}
			weight = {
				modifier = {
					factor = 15
					total_population < 15
				}
				modifier = {
					factor = 15
					total_population < 10
				}
				modifier = {
					factor = 5
					is_capital = yes
				}
				modifier = {
					factor = 5
					is_state_capital = yes
				}
				modifier = {
					factor = 3
					total_population < population_cap
				}
				modifier = {
					factor = 0.005
					total_population > population_cap
				}
			}
			save_scope_as = new_city
		}
	# }
		
		while = {
			count = { 15 20 }
			if = {
				limit = {
					any_pops_in_province = {
						pop_culture_group = gallic
					}
				}
				random_pops_in_province = {
					limit = {
						pop_culture_group = gallic
					}
					move_pop = scope:new_city
				}
				if = {
					limit = {
						has_variable = galatian_pop_move_variable
					}
					change_variable = {
						name = galatian_pop_move_variable
						add = 1
					}
				}
				else = {
					set_variable = {
						name = galatian_pop_move_variable
						value = 1
					}
				}
				scope:new_city = {
					if = {
						limit = {
							has_variable = galatian_pop_move_variable
						}
						change_variable = {
							name = galatian_pop_move_variable
							add = 1
						}
					}
					else = {
						set_variable = {
							name = galatian_pop_move_variable
							value = 1
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_variable = pella_chosen_city
			}
			remove_variable = pella_chosen_city
		}
	
	}
	
	option = {
		name = galatian_invasion.14.a
	}

}


galatian_invasion.20 = { # Second Wave
	type = country_event
	title = "galatian_invasion.20.t"
	desc = "galatian_invasion.20.desc"
	picture = walled_city_under_siege #aka city_siege

	left_portrait = scope:delphi_attacker.current_ruler
	right_portrait = scope:delphi_defender.current_ruler
	goto_location = root
	
	trigger = {
		owns = 424
	}
	
	immediate = { #  invade
	
		random_country = {
			limit = {
				any_owned_province = { province_id = 424 }
			}
			save_scope_as = delphi_defender
		}
		if = {
			limit = {
				scope:delphi_defender = {
					NOT = { owns = 475 }
				}
			}
			random_country = {
				limit = {
					any_owned_province = { province_id = 475 }
				}
				save_scope_as = passerby_one
			}
		}
		if = {
			limit = {
				NOR = {
					scope:delphi_defender = { owns = 399 }
					trigger_if = {
						limit = {exists = scope:passerby_one }
						scope:passerby_one = { owns = 399 }
					}
				}
			}
			random_country = {
				limit = {
					any_owned_province = { province_id = 399 }
				}
				save_scope_as = passerby_two
			}
		}
		if = {
			limit = {
				NOR = {
					scope:delphi_defender = { owns = 469 }
					trigger_if = {
						limit = {exists = scope:passerby_one }
						scope:passerby_one = { owns = 469 }
					}
				}
			}
			random_country = {
				limit = {
					any_owned_province = { province_id = 469 }
				}
				save_scope_as = passerby_three
			}
		}
		
		scope:delphi_attacker = {
			# trigger_if = {
			if = {
				limit = { exists = scope:passerby_one }
				add_military_access = scope:passerby_one
			}
			# trigger_if = {
			if = {
				limit = { exists = scope:passerby_two }
				add_military_access = scope:passerby_two
			}
			if = {
				limit = { exists = scope:passerby_two }
				add_military_access = scope:passerby_three
			}
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:424
				target = scope:delphi_defender
			}
			create_unit = {
				navy = no
				location = p:469 
				commander = scope:delphi_attacker.current_ruler
				while = {
					count = 39
					add_subunit = light_infantry
				}
				while = {
					count = 10
					add_subunit = chariots
				}
			}
			# save_scope_as = second_gauls	
		}
		
		random_current_war = {
			limit = {
				any_war_attacker = { this = scope:delphi_attacker }
				any_war_defender = { this = scope:delphi_defender }
			}
			save_scope_as = second_galatian_war_scope
		}
		
	}
	
	option = {
		name = galatian_invasion.20.a 
		
		random_country = {
			limit = {
				capital_scope = {
					OR = {
						is_in_area = boeotia_area
						is_in_area = central_greece_area
						is_in_area = aetolia_area
					}
				}
				is_subject = no
				NOT = { owns = 424 }
			}
			trigger_event = {
				id = galatian_invasion.21
				days = 1
			}
		}
	}
	
	after = {
		
		every_country = {
			limit = {
				capital_scope = {
					OR = {
						is_in_area = boeotia_area
						is_in_area = central_greece_area
						is_in_area = aetolia_area
					}
				}
			}
			trigger_event = {
				id = galatian_invasion.21
				days = 1
			}
		}
		every_country = {
			limit = {
				country_culture_group = hellenic
			}
			trigger_event = {
				id = galatian_invasion.22
				days = 3
			}
		}
	}
	
}

galatian_invasion.21 = { # Help from Greeks
	type = country_event
	title = "galatian_invasion.21.t"
	desc = "galatian_invasion.21.desc"
	picture = walled_city_under_siege #aka city_siege

	left_portrait = scope:delphi_attacker.current_ruler
	right_portrait = scope:delphi_defender.current_ruler
	right_portrait = current_ruler
	goto_location = root
	
	trigger = {
		is_subject = no
		NOT = { owns = 424 }
		NOT = { war_with = scope:delphi_attacker }
	}
	
	immediate = {
		
		# random_country = {
			# limit = { this = root }
			# save_scope_as = friend_of_delphi
		# }
	}	
	
	option = {
		name = galatian_invasion.21.a
			
		add_to_war = {
			target = scope:second_galatian_war_scope
			leader = no 
			attacker = no
		}
		set_variable = {
			name = defender_of_delphi
			value = 1
		}
	}
	
}

galatian_invasion.22 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.22.t"
	desc = "galatian_invasion.22.desc"
	picture = walled_city_under_siege #aka city_siege

	left_portrait = scope:delphi_attacker.current_ruler
	right_portrait = scope:delphi_defender.current_ruler
	
	trigger = {
		country_culture_group = hellenic
		NOT = {	has_variable = defender_of_delphi }
	}
	
	# immediate = {

	# }	
	
	option = {
		name = galatian_invasion.22.a
	}

}

galatian_invasion.23 = { # Setting - Start Task
	type = country_event
	title = "galatian_invasion.23.t"
	desc = "galatian_invasion.23.desc"
	picture = gallic_village_scene # aka celtic_village # too serene
	right_portrait = current_ruler
	
	fire_only_once = yes

	trigger = {
		country_culture_group = gallic
		any_owned_province = {
			is_in_region = greece_region
		}
		is_ai = yes
	}
	
	immediate = {
		
		random_country = {
			limit = {
				country_culture_group = gallic
				any_owned_province = {
					is_in_region = greece_region
				}
				is_ai = yes
			}
			save_scope_as = migrating_nation
		}
	}
	
	option = {
		name = galatian_invasion.23.a
		
		scope:migrating_nation = {
			while = {
				count = { 20 }
				if = {
					limit = {
						NOR = { has_variable = delphi_chosen_city }
						any_owned_province = {
							OR = {
								is_in_region = moesia_region
								is_in_region = illyria_region
								is_in_region = pannonia_region
								is_in_region = dacia_region
							}
							province_dominant_culture_group = gallic
						}
					}
					random_owned_province = {
						limit = {
							NOT = { has_variable = delphi_chosen_city }
							OR = {
								is_in_region = moesia_region
								is_in_region = illyria_region
								is_in_region = pannonia_region
								is_in_region = dacia_region
							}
							province_dominant_culture_group = gallic
						}
						set_variable = delphi_chosen_city
					
						# trigger_event = {
							# id = galatian_invasion.24
							# days = 3 
						# }
					}
				}
			}
		}
	}
	
}


galatian_invasion.24 = { # Settling - Settling
    type = province_event
    hidden = yes
	
	trigger = {

	}
	
	immediate = {
		
		# scope:migrating_nation = {
			# random_owned_province = {
			random_ownable_province = {
				limit = {
					is_in_region = greece_region
					trigger_if = {
						limit = {
							exists = owner
						}
						owner = scope:migrating_nation
					}
				}
				weight = {
					modifier = {
						factor = 15
						total_population < 15
					}
					modifier = {
						factor = 15
						total_population < 10
					}
					modifier = {
						factor = 5
						is_capital = yes
					}
					modifier = {
						factor = 5
						is_state_capital = yes
					}
					modifier = {
						factor = 3
						total_population < population_cap
					}
					modifier = {
						factor = 0.005
						total_population > population_cap
					}
				}
				save_scope_as = new_city
			}
		# # }
		
		while = {
			count = { 15 20 }
			if = {
				limit = {
					any_pops_in_province = {
						pop_culture_group = gallic
					}
				}
				random_pops_in_province = {
					limit = {
						pop_culture_group = gallic
					}
					move_pop = scope:new_city
				}
				if = {
					limit = {
						has_variable = galatian_pop_move_variable
					}
					change_variable = {
						name = galatian_pop_move_variable
						add = 1
					}
				}
				else = {
					set_variable = {
						name = galatian_pop_move_variable
						value = 1
					}
				}
				scope:new_city = {
					if = {
						limit = {
							has_variable = galatian_pop_move_variable
						}
						change_variable = {
							name = galatian_pop_move_variable
							add = 1
						}
					}
					else = {
						set_variable = {
							name = galatian_pop_move_variable
							value = 1
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_variable = pella_chosen_city
			}
			remove_variable = pella_chosen_city
		}
	
	}
	
	option = {
		name = galatian_invasion.24.a
		
	}

}

galatian_invasion.25 = {
	type = country_event
	title = "galatian_invasion.25.t"
	desc = "galatian_invasion.25.desc"
	picture = walled_city_under_siege #aka city_siege

	left_portrait = scope:tylis_attacker.current_ruler
	right_portrait = scope:tylis_defender.current_ruler
	goto_location = root
	
	trigger = {
		owns = 480
	}
	
	immediate = { # invade
	
		random_country = {
			limit = {
				owns = 480
			}
			save_scope_as = tylis_defender
		}
		
		scope:tylis_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:480
				target = scope:tylis_defender
			}
			create_unit = {
				navy = no
				location = p:480
				commander = scope:tylis_attacker.current_ruler
				while = {
					count = 39
					add_subunit = light_infantry
				}
				while = {
					count = 10
					add_subunit = chariots
				}
			}
			# save_scope_as = first_gauls
		}
		
		random_current_war = {
			limit = {
				any_war_attacker = { this = scope:tylis_attacker }
				any_war_defender = { this = scope:tylis_defender }
			}
			save_scope_as = tylis_war_scope
		}
	}
	
	option = {
		name = galatian_invasion.25.a
	}
		
	# option = {
		# name = galatian_invasion.2.b # 

	# }
	
	after = {
		
		every_country = {
			limit = {
				country_culture_group = hellenic
			}
			trigger_event = {
				id = galatian_invasion.26
				days = 3
			}
		}

	}
	
}

galatian_invasion.26 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.26.t"
	desc = "galatian_invasion.26.desc"
	picture = city_siege 

	left_portrait = scope:tylis_attacker.current_ruler
	right_portrait = scope:tylis_defender.current_ruler
	
	trigger = {
		country_culture_group = hellenic
		NOT = {	owns = 480 }
	}
	
	# immediate = {

	# }	
	
	option = {
		name = galatian_invasion.26.a
	}

}

galatian_invasion.27 = { # Setting - Start Task
	type = country_event
	title = "galatian_invasion.27.t"
	desc = "galatian_invasion.27.desc"
	picture = celtic_village 
	right_portrait = current_ruler
	
	fire_only_once = yes

	trigger = {
		country_culture_group = gallic
		any_owned_province = {
			is_in_region = thrace_region
		}
		is_ai = yes
	}
	
	immediate = {
		
		random_country = {
			limit = {
				country_culture_group = gallic
				any_owned_province = {
					is_in_region = thrace_region
				}
				is_ai = yes
			}
			save_scope_as = migrating_nation
		}
	}
	
	option = {
		name = galatian_invasion.27.a
		
		scope:migrating_nation = {
			while = {
				count = { 15 20 }
				if = {
					limit = {
						NOR = { has_variable = tylis_chosen_city }
						any_owned_province = {
							OR = {
								is_in_region = moesia_region
								is_in_region = illyria_region
								is_in_region = pannonia_region
								is_in_region = dacia_region
							}
							province_dominant_culture_group = gallic
						}
					}
					random_owned_province = {
						limit = {
							NOT = { has_variable = tylis_chosen_city }
							OR = {
								is_in_region = moesia_region
								is_in_region = illyria_region
								is_in_region = pannonia_region
								is_in_region = dacia_region
							}
							province_dominant_culture_group = gallic
						}
						set_variable = tylis_chosen_city
					
						trigger_event = {
							id = galatian_invasion.28
							days = 3 
						}
					}
				}
			}
		}
	}
	
}


galatian_invasion.28 = { # Settling - Settling
    type = province_event
    hidden = yes
	
	trigger = {

	}
	
	immediate = {
		
		random_ownable_province = {
			limit = {
				is_in_region = thrace_region
				trigger_if = {
					limit = {
						exists = owner
					}
					owner = scope:migrating_nation
				}
			}
			weight = {
				modifier = {
					factor = 15
					total_population < 15
				}
				modifier = {
					factor = 15
					total_population < 10
				}
				modifier = {
					factor = 5
					is_capital = yes
				}
				modifier = {
					factor = 5
					is_state_capital = yes
				}
				modifier = {
					factor = 3
					total_population < population_cap
				}
				modifier = {
					factor = 0.005
					total_population > population_cap
				}
			}
			save_scope_as = new_city
		}
		
		while = {
			count = { 15 20 }
			if = {
				limit = {
					any_pops_in_province = {
						pop_culture_group = gallic
					}
				}
				random_pops_in_province = {
					limit = {
						pop_culture_group = gallic
					}
					move_pop = scope:new_city
				}
				if = {
					limit = {
						has_variable = galatian_pop_move_variable
					}
					change_variable = {
						name = galatian_pop_move_variable
						add = 1
					}
				}
				else = {
					set_variable = {
						name = galatian_pop_move_variable
						value = 1
					}
				}
				scope:new_city = {
					if = {
						limit = {
							has_variable = galatian_pop_move_variable
						}
						change_variable = {
							name = galatian_pop_move_variable
							add = 1
						}
					}
					else = {
						set_variable = {
							name = galatian_pop_move_variable
							value = 1
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_variable = tylis_chosen_city
			}
			remove_variable = tylis_chosen_city
		}
	
	}
	
	option = {
		name = galatian_invasion.28.a
		
	}

}

galatian_invasion.30 = { # Anatolia invasion
	type = country_event
	title = "galatian_invasion.30.t"
	desc = "galatian_invasion.30.desc"
	# picture = gallic_clan_chiefs_discussing # aka celtic_chiefs
	# picture = looting #soldiers look roman
	# picture = walled_city_under_siege #aka city_siege
	picture = elephant_battle
	
	left_portrait = scope:pessinous_attacker.current_ruler
	left_portrait = scope:ankyra_attacker.current_ruler
	left_portrait = scope:tavium_attacker.current_ruler
	right_portrait = scope:pessinous_defender.current_ruler
	right_portrait = scope:ankyra_defender.current_ruler
	right_portrait = scope:tavium_defender.current_ruler

	goto_location = root
	
	trigger = {
		# OR = {
			# owns = 1941 # Synnada
			owns = 189 # Gordion
			# owns = 194 # Ankyra
		# }
	}
	
	immediate = { #  invade
	
		random_country = {
			limit = {
				any_owned_province = { province_id = 194 }
			}
			save_scope_as = tavium_defender # defending Ankyra
		}
		
		random_country = {
			limit = {
				any_owned_province = { province_id = 189 }
			}
			save_scope_as = ankyra_defender # defending Gordion
		}
		
		random_country = {
			limit = {
				any_owned_province = { province_id = 1941 }
			}
			save_scope_as = pessinous_defender # defending Synnada
		}
		
		scope:pessinous_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:1941 # Synnada
				target = scope:pessinous_defender
			}
			create_unit = {
				navy = no
				location = p:1941
				commander = scope:pessinous_attacker.current_ruler
				while = {
					count = 79
					add_subunit = light_infantry
				}
				while = {
					count = 20
					add_subunit = chariots
				}
				# save_scope_as = tectosagia_galatian_horde
			}
			
		}
		
		scope:ankyra_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:189 # Gordion
				target = scope:ankyra_defender
			}
			create_unit = {
				navy = no
				location = p:189 
				commander = scope:ankyra_attacker.current_ruler
				while = {
					count = 79
					add_subunit = light_infantry
				}
				while = {
					count = 20
					add_subunit = chariots
				}
				# save_scope_as = tectosagia_galatian_horde
			}
			
		}
		
		scope:tavium_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:194 # Ankyra
				target = scope:tavium_defender
			}
			create_unit = {
				navy = no
				location = p:194
				commander = scope:tavium_attacker.current_ruler
				while = {
					count = 79
					add_subunit = light_infantry
				}
				while = {
					count = 20
					add_subunit = chariots
				}
				# save_scope_as = tectosagia_galatian_horde
			}
			
		}
		
	}
	
	option = {
		name = galatian_invasion.30.a 
		
		scope:tavium_defender = {
			trigger_event = {
				id = galatian_invasion.32
				days = 180
			}
		}
		scope:ankyra_defender = {
			trigger_event = {
				id = galatian_invasion.33
				days = 180
			}
		}
		scope:pessinous_defender = {
			trigger_event = {
				id = galatian_invasion.34
				days = 180
			}
		}
	}

	after = {
		every_country = {
			limit = {
				country_culture_group = hellenic
			}
			trigger_event = {
				id = galatian_invasion.31
				days = 3
			}
		}
	}

	# option = {
		# name = galatian_invasion.32.b 
	# }
	
}


galatian_invasion.31 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.31.t"
	desc = "galatian_invasion.31.desc"
	picture = elephant_battle
	
	left_portrait = scope:pessinous_attacker.current_ruler
	left_portrait = scope:ankyra_attacker.current_ruler
	left_portrait = scope:tavium_attacker.current_ruler
	right_portrait = scope:pessinous_defender.current_ruler
	right_portrait = scope:ankyra_defender.current_ruler
	right_portrait = scope:tavium_defender.current_ruler
	
	trigger = {
		country_culture_group = hellenic
		NOR = {
			owns = 189 # Gordion
			owns = 194 # Ankyra
			owns = 1941 # Synnada
		}
	}
	
	# immediate = {

	# }	
	
	option = {
		name = galatian_invasion.31.a
	}

}
galatian_invasion.32 = { # Special Peace - Trocmeria
	type = country_event
	title = "galatian_invasion.32.t"
	desc = "galatian_invasion.32.desc"
	# picture = gallic_clan_chiefs_discussing # aka celtic_chiefs
	picture = gauls_interacting_negotiating # out of place; maybe for peace deals
	# picture = looting #soldiers look roman
	# picture = walled_city_under_siege #aka city_siege
	# picture = elephant_battle
	
	left_portrait = scope:tavium_attacker.current_ruler
	right_portrait = scope:tavium_defender.current_ruler
	
	trigger = {
		war_with = scope:tavium_attacker
	}
	
	# immediate = {

	# }	
	
	option = { # Give land and make subject
		name = galatian_invasion.32.a
		
		scope:tavium_defender = {
			every_owned_province = {
				limit = {
					# OR = {
						# is_in_area = galatia_area
						is_in_area = galatia_trocmi_area
						# is_in_area = phrygia_epiktetos_area
						# is_in_area = phrygia_parorea_area
						# is_in_area = lycaonia_area
					# }
				}
				set_owned_by = scope:tavium_attacker
			}
			make_subject = {
				target = scope:tavium_attacker
				type = vassal_tribe
			}
		}
		
		scope:tavium_attacker = {
			trigger_event = {
				id = galatian_invasion.35 # Move Pops
				days = 1
			}
			
			# trigger_event = {
				# id = galatian_invasion.38 # Form Galatia
				# days = 10
			# }
			# make_subject
		}
		# ai_will_do = yes
		# ai_chance = { factor = 95 }
	}
	
	option = {
		name = galatian_invasion.32.b
		trigger = {
			# OR = {
				# scope:tavium_defender = {
					# OR = {
						# tag = c:PRY
						# tag = c:SEL
						# tag = c:MAC
						# tag = c:TRE
						# tag = c:EGY
					# }
				# }
				is_ai = no
			# }
		}
		# ai_chance = { factor = 5 }
	}

}

galatian_invasion.33 = { # Special Peace - Tectosagia
	type = country_event
	title = "galatian_invasion.33.t"
	desc = "galatian_invasion.33.desc"
	# picture = gallic_clan_chiefs_discussing # aka celtic_chiefs
	picture = gauls_interacting_negotiating # out of place; maybe for peace deals
	# picture = looting #soldiers look roman
	# picture = walled_city_under_siege #aka city_siege
	# picture = elephant_battle
	
	left_portrait = scope:ankyra_attacker.current_ruler
	right_portrait = scope:ankyra_defender.current_ruler
	
	trigger = {
		war_with = scope:ankyra_attacker
	}
	
	# immediate = {

	# }	
	
	option = { # Give land and make subject
		name = galatian_invasion.33.a
		
		scope:ankyra_defender = {
			every_owned_province = {
				limit = {
					OR = {
						is_in_area = galatia_area
						province_id = 174 # northern lyaonia
						province_id = 176
						province_id = 177
						province_id = 180
						# is_in_area = galatia_trocmi_area
						# is_in_area = phrygia_epiktetos_area
						# is_in_area = phrygia_parorea_area
						# is_in_area = lycaonia_area
					}
				}
				set_owned_by = scope:ankyra_attacker
			}
			make_subject = {
				target = scope:ankyra_attacker
				type = vassal_tribe
			}
		}
		
		scope:ankyra_attacker = {
			trigger_event = {
				id = galatian_invasion.35 # Move Pops
				days = 1
			}
			
			# trigger_event = {
				# id = galatian_invasion.38 # Form Galatia
				# days = 10
			# }
			# make_subject
		}
		# ai_will_do = yes
		# ai_chance = { factor = 95 }
	}
	
	option = {
		name = galatian_invasion.33.b
		trigger = {
			# OR = {
				# scope:ankyra_defender = {
					# OR = {
						# tag = c:PRY
						# tag = c:SEL
						# tag = c:MAC
						# tag = c:TRE
						# tag = c:EGY
					# }
				# }
				is_ai = no
			# }
		}
		# ai_chance = { factor = 5 }
	}

}

galatian_invasion.34 = { # Special Peace - Tolistobogia
	type = country_event
	title = "galatian_invasion.34.t"
	desc = "galatian_invasion.34.desc"
	picture = gauls_interacting_negotiating # out of place; maybe for peace deals
	# picture = looting #soldiers look roman
	# picture = walled_city_under_siege #aka city_siege
	# picture = elephant_battle
	
	left_portrait = scope:pessinous_attacker.current_ruler
	right_portrait = scope:pessinous_defender.current_ruler
	
	trigger = {
		war_with = scope:pessinous_attacker
	}
	
	# immediate = {

	# }	
	
	option = { # Give land and make subject
		name = galatian_invasion.34.a
		
		scope:pessinous_defender = {
			every_owned_province = {
				limit = {
					OR = { # pulls from phrygia_epiktetos then phrygia_parorea
						province_id = 314 # Nakoleia
						province_id = 313 # Mitropolis Phrygias
						province_id = 183 # Abbasion
						province_id = 184 # Dokimeion
						province_id = 185 # Ipsos
						province_id = 178
						province_id = 179
						province_id = 182
						province_id = 230
						province_id = 1777
						province_id = 1937
						province_id = 1939
						province_id = 1941

						# is_in_area = galatia_area
						# is_in_area = galatia_trocmi_area
						# is_in_area = phrygia_epiktetos_area
						# is_in_area = phrygia_parorea_area
						# is_in_area = lycaonia_area
					}
				}
				set_owned_by = scope:pessinous_attacker
			}
			make_subject = {
				target = scope:pessinous_attacker
				type = vassal_tribe
			}
		}
		
		scope:pessinous_attacker = {
			trigger_event = {
				id = galatian_invasion.35 # Move Pops
				days = 1
			}
			
			# trigger_event = {
				# id = galatian_invasion.38 # Form Galatia
				# days = 10
			# }
			# make_subject
		}
		# ai_will_do = yes
		# ai_chance = { factor = 90 }
	}
	
	option = {
		name = galatian_invasion.34.b
		trigger = {
			# OR = {
				# scope:pessinous_defender = {
					# NOR = {
						# tag = c:PRY
						# tag = c:SEL
						# tag = c:MAC
						# tag = c:TRE
						# tag = c:EGY
					# }
				# }
				is_ai = no
			}
		# }
		# ai_chance = { factor = 10 }
	}

}

galatian_invasion.35 = { # Setting Galatia - Start Task
	type = country_event
	title = "galatian_invasion.35.t"
	desc = "galatian_invasion.35.desc"
	picture = celtic_village

	
	right_portrait = current_ruler
	
	trigger = {
		country_culture_group = gallic
		any_owned_province = {
			is_in_region = galatia_region
		}
		is_ai = yes
		NOT = { exists = c:GLT }
	}
	
	immediate = {
		
	}
	
	option = {
		name = galatian_invasion.35.a
		
		while = {
			count = { 15 20 }
			if = {
				limit = {
					NOR = { has_variable = galatian_chosen_city }
					any_owned_province = {
						OR = {
							is_in_region = macedonia_region
							is_in_region = moesia_region
							is_in_region = illyria_region
							is_in_region = pannonia_region
							is_in_region = dacia_region
						}
						province_dominant_culture_group = gallic
					}
				}
				random_owned_province = {
					limit = {
						NOT = { has_variable = galatian_chosen_city }
						# trigger_if = {
							# limit = {
								# exists = owner
							# }
							# NOT = { owner = scope:seleukid_nation }
						# }
						# total_population >= 20
						OR = {
							is_in_region = macedonia_region
							is_in_region = moesia_region
							is_in_region = illyria_region
							is_in_region = pannonia_region
							is_in_region = dacia_region
						}
						province_dominant_culture_group = gallic
					}
					set_variable = galatian_chosen_city
				
					trigger_event = {
						id = galatian_invasion.36
						days = 3 
					}
				}
			}
		}
	}
	
}


galatian_invasion.36 = { # Settling Galatia - Settling
    type = province_event
    hidden = yes
	
	trigger = {

	}
	
	immediate = {
		
		# scope:first_galatians = {
			# random_owned_province = {
			random_ownable_province = {
				limit = {
					is_in_region = galatia_region
					trigger_if = {
						limit = {
							exists = owner
						}
						OR = {
							owner = scope:tavium_attacker
							owner = scope:ankyra_attacker
							owner = scope:pessinous_attacker
						}
					}
				}
				weight = {
					modifier = {
						factor = 15
						total_population < 15
					}
					modifier = {
						factor = 15
						total_population < 10
					}
					modifier = {
						factor = 5
						is_capital = yes
					}
					modifier = {
						factor = 5
						is_state_capital = yes
					}
					modifier = {
						factor = 3
						total_population < population_cap
					}
					modifier = {
						factor = 0.005
						total_population > population_cap
					}
				}
				save_scope_as = galatian_city
			}
		# }
		
		while = {
			count = { 15 20 }
			if = {
				limit = {
					# total_population >= 20
					any_pops_in_province = {
						pop_culture_group = gallic
						# NOR = {
							# pop_type = slaves
							# pop_type = tribesmen
						# }
					}
				}
				random_pops_in_province = {
					limit = {
						pop_culture_group = gallic
						# NOR = {
							# pop_type = slaves
							# pop_type = tribesmen
						# }
					}
					move_pop = scope:galatian_city
				}
				if = {
					limit = {
						has_variable = galatian_pop_move_variable
					}
					change_variable = {
						name = galatian_pop_move_variable
						add = 1
					}
				}
				else = {
					set_variable = {
						name = galatian_pop_move_variable
						value = 1
					}
				}
				scope:galatian_city = {
					if = {
						limit = {
							has_variable = galatian_pop_move_variable
						}
						change_variable = {
							name = galatian_pop_move_variable
							add = 1
						}
					}
					else = {
						set_variable = {
							name = galatian_pop_move_variable
							value = 1
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_variable = galatian_chosen_city
			}
			remove_variable = galatian_chosen_city
		}
	
	}
	
	option = {
		name = galatian_invasion.36.a
		
	}

}

galatian_invasion.38 = { # Forming Galatia
	type = country_event
	title = "galatian_invasion.38.t"
	desc = "galatian_invasion.38.desc"
	# picture = celtic_chiefs
	# picture = celtic_village 

	# left_portrait = scope:pessinous_attacker.current_ruler
	# left_portrait = scope:tavium_attacker.current_ruler
	# right_portrait = scope:new_galatians.current_ruler
	
	# fire_only_once = yes
	
	trigger = {
		
		# OR = {
			# any_country = {
				# owns = 194
				# country_culture_group = gallic
			# }
			# AND = {
				# NOT = {
					# any_country = {
						# owns = 194
						# country_culture_group = gallic
					# }
				# }
				country_culture_group = gallic
				any_owned_province = {
					is_in_region = galatia_region
				}
				is_ai = yes
				# NOT = {
					# tag = GLT
				# }
			# }
		# }
	}
	
	immediate = {
		
		if = { # Moves capital to Ankyra, Gordion, or random city
			limit = {
				NOT = { exists = c:GLT }
			}
			if = {
				limit = {
					any_country = {
						owns = 194
						country_culture_group = gallic
					}
				}
				random_country = {
					limit = {
						owns = 194
						country_culture_group = gallic
					}
					save_scope_as = new_galatians
				}
			}
			else = {
				# limit = {
					# NOT = {
						# any_country = {
							# owns = 194
							# country_culture_group = gallic
						# }
					# }
				# }
				random_country = {
					limit = {
						country_culture_group = gallic
						any_owned_province = {
							is_in_region = galatia_region
						}
					}
					save_scope_as = new_galatians
				}
			}
			# c:TBL = {
			# effect = {
			scope:new_galatians = {
				# custom_tooltip = "tier_2_formable_tooltip"
				tribal_formable_government_change_effect = yes
				change_country_name = "GALATIA_NAME"
				# hidden_effect = {
					change_country_adjective = "GALATIA_ADJECTIVE"
					change_country_color = "galatia_light_blue_color"
					change_country_tag = GLT
					change_country_flag = GALATIA_FLAG
				# }
				if = {
					limit = {
						owns = 194
						p:194 = { is_capital = no }
					}
					p:194 = {
						save_scope_as = new_galatian_capital
					}
				}
				else_if = {
					limit = {
						owns = 189
						p:189 = { is_capital = no }
					}
					p:189 = {
						save_scope_as = new_galatian_capital
					}
				}
				else = {
					random_owned_province = {
						limit = { has_city_status = yes }
						save_scope_as = new_galatian_capital
					}
				}
				
				# set_capital = 194
				set_capital = scope:new_galatian_capital
				hidden_effect = {
					# p:194.state = {
					scope:new_galatian_capital.state = {
						# set_state_capital = 194
						set_state_capital = scope:new_galatian_capital
					}
				}
				capital_scope = {
					establish_city_effect = yes
				}
				# p:194 = {
				scope:new_galatian_capital = {
					capital_formable_medium_effect = yes
					formable_capital_modifier_normal_effect = yes
				}
				custom_tooltip = galatia_claims_tooltip
				hidden_effect = {
					region:galatia_region = { formable_region_province_effect = yes }
					region:cappadocia_region = { formable_region_province_effect = yes }
				}
				add_3_free_province_investments = yes
			}
			
		}
		
		if = { # absorbs other nations into Galatia
			limit = {
				any_country = {
					country_culture_group = gallic
					any_owned_province = {
						is_in_region = galatia_region
					}
					NOT = { tag = GLT }
				}
			}
			# random_country = {
			every_country = {
				limit = {
					country_culture_group = gallic
					any_owned_province = {
						is_in_region = galatia_region
					}
					NOT = { tag = GLT }
				}
				# save_scope_as = other_galatians
			# }
				
			# scope:other_galatians = {
				every_owned_province = {
					# limit = { is_in_area = galatia_area }
					set_owned_by = scope:new_galatians #first_galatians
				}
			}
		}
		
		scope:new_galatians = {
			set_primary_culture = galatian
			
			every_owned_province = {
				limit = {
					is_in_region = galatia_region
				}
				ordered_pops_in_province = {
					order_by = pop_hapiness
				# every_pops_in_province = {
					limit = {
						pop_culture_group = gallic
					}
					set_pop_culture = galatian
					max = 10
				}
			}
		}
		
	}
	
	option = {
		name = galatian_invasion.38.a
	} 
	
	after = {
		every_country = {
			limit = {
				OR = {
					country_culture_group = hellenic
					capital_scope = {
						OR = {
							is_in_region = asia_region
							is_in_region = galatia_region
							is_in_region = cilicia_region
						}
					}
				}
			}
			trigger_event = {
				id = galatian_invasion.39
				days = 3
			}
		}
	}
}

galatian_invasion.39 = { #Notification of Galatia
	type = country_event
	title = "galatian_invasion.39.t"
	desc = "galatian_invasion.39.desc"
	# picture = celtic_chiefs 
	# picture = celtic_village 

	
	left_portrait = scope:new_galatians.current_ruler
	right_portrait = current_ruler
	
	trigger = {

	}
	
	# immediate = {

	# }	
	
	option = {
		name = galatian_invasion.39.a
	}
}

galatian_invasion.40 = {
	type = country_event
	title = "galatian_invasion.40.t"
	desc = "galatian_invasion.40.desc"
	
	# right_portrait = c:GLT.current_ruler
	
	trigger = {
		# tag = GLT
	}
	
	immediate = {
		# c:GLT = {
			# set_primary_culture = galatian
			
			# every_owned_province = {
				# every_pops_in_province = {
					# limit = {
						# pop_culture_group = gallic
					# }
					# set_pop_culture = galatian
				# }
			# }
		# }
	}
	
	option = {
		name = galatian_invasion.40.a
	}
}
	