namespace = judea_inv

judea_inv.1 = { #Join the Diadochi war
	type = country_event
	title = judea_inv.1.t
	desc = judea_inv.1.desc
	picture = army_desert 

	right_portrait = current_ruler
	left_portrait = c:PRY.current_ruler
	left_portrait = c:EGY.current_ruler

	trigger = {
		religion = judaism
		has_land = yes
	}

	option = { #on Ptolemaios' side
		name = judea_inv.1.a
		add_opinion = {
			modifier = joined_my_war
			target = c:EGY
		}
		add_opinion = {
			modifier = joined_enemy_war
			target = c:PRY
		}
		custom_tooltip = judea_inv.1.a.tt
		hidden_effect = {
			add_opinion = {
				modifier = joined_my_war
				target = c:EGY
			}
			add_opinion = {
				modifier = joined_enemy_war
				target = c:PRY
			}
			c:EGY = {
				trigger_event = {
					id = judea_inv.4
					days = 5
				}
			}
			set_variable = {
				name = egy_jud
			}
			if = {
            	limit = {
                	root = {
                    	is_subject_of = c:PRY
                	}
            	}
				release_subject = root
        	}
		}
	}
	option = { #On Antigonos' side
		name = judea_inv.1.b
		add_opinion = {
			modifier = joined_enemy_war
			target = c:EGY
		}
		add_opinion = {
			modifier = joined_my_war
			target = c:PRY
		}
		custom_tooltip = judea_inv.1.b.tt
		hidden_effect = {
			c:PRY = {
				trigger_event = {
					id = judea_inv.3
					days = 5
				}
			}
			set_variable = {
				name = pry_jud
			}
		}

	}
	option = { #remain neutral
		name = judea_inv.1.c
		add_political_influence = 25
		add_opinion = {
			modifier = did_not_join_war
			target = c:PRY
			target = c:EGY
		}
		custom_tooltip = judea_inv.1.c.tt
		hidden_effect = {
			set_variable = {
				name = no_want_war
			}
		}
	}
}
judea_inv.2 = { 
	type = country_event
	title = judea_inv.2.t
	desc = judea_inv.2.desc
	picture = council_country

	left_portrait = current_ruler
	right_portrait = scope:mission_country_scope.current_ruler

	trigger = {
		has_land = yes
	}

	option = { #Territory
		name = judea_inv.2.a
		area:decapolis_area = {
			every_area_province = {
				set_owned_by = scope:mission_country_scope
			}
		}
		p:695 = { set_owned_by = scope:mission_country_scope }
		p:696 = { set_owned_by = scope:mission_country_scope }
		p:693 = { set_owned_by = scope:mission_country_scope }
		p:690 = { set_owned_by = scope:mission_country_scope }
		p:685 = { set_owned_by = scope:mission_country_scope }
		p:673 = { set_owned_by = scope:mission_country_scope }
		p:672 = { set_owned_by = scope:mission_country_scope }
		p:674 = { set_owned_by = scope:mission_country_scope }
		p:648 = { set_owned_by = scope:mission_country_scope }
		p:740 = { set_owned_by = scope:mission_country_scope }
		p:742 = { set_owned_by = scope:mission_country_scope }
		p:677 = { set_owned_by = scope:mission_country_scope }
		p:669 = { set_owned_by = scope:mission_country_scope }
	}
	option = { #Betray and give no land
		name = judea_inv.2.b
		if = {
			limit = { alliance_with = scope:mission_country_scope }
			break_alliance = scope:mission_country_scope
		}
		add_opinion = {
			modifier = broken_promise
			target = scope:mission_country_scope
		}
		root = {
			area:decapolis_area = {
				every_area_province = {
					add_claim = scope:mission_country_scope
				}
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}
judea_inv.3 = { # Antigonids
	type = country_event
	title = judea_inv.3.t
	desc = judea_inv.3.desc
	picture = army_desert

	right_portrait = c:EGY.current_ruler
	left_portrait = c:PRY.current_ruler
	left_portrait = scope:mission_country_scope.current_ruler

	trigger = {
		has_land = yes
	}

	immediate = {
		random_active_war= {
            limit = {
                OR = {
                    AND = {
                        any_war_attacker = { this = c:EGY }
                        any_war_defender = { this = c:PRY }
                    }
                    AND = {
                        any_war_defender = { this = c:EGY }
                        any_war_attacker = { this = c:PRY }
                    }
                }
            }
            save_scope_as = pry_egy_jud_war_scope
        }
	}

	option = {
		name = judea_inv.3.a
		scope:mission_country_scope = { #on Antigonos' side
			add_to_war = {
				target = scope:pry_egy_jud_war_scope
				attacker = no
				leader = no 
			}
		}
		scope:mission_country_scope = {
			trigger_event = {
				id = judea_inv.5
				days = -1
			}
		}
		ai_chance = {
            factor = 2
            modifier = {
                factor = 2.5
                opinion = {
					target = scope:mission_country_scope
					value >= 50
				} 
            }
            modifier = {
                factor = 3
                opinion = {
					target = scope:mission_country_scope
					value >= 100
				} 
            }
        }
	}
	option = {
		name = judea_inv.3.b
		scope:mission_country_scope = {
			set_variable = {
				name = no_want_war
				days = -1
			}
		}
		scope:mission_country_scope = {
			trigger_event = {
				id = judea_inv.5
				days = -1
			}
		}
		ai_chance = {
            factor = 1
            modifier = {
                factor = 1.5
                opinion = {
					target = scope:mission_country_scope
					value <= -50
				} 
            }
            modifier = {
                factor = 2
                opinion = {
					target = scope:mission_country_scope
					value <= -100
				} 
            }
        }
	}

}
judea_inv.4 = { #Ptolemaic Kingdom
	type = country_event
	title = judea_inv.4.t
	desc = judea_inv.4.desc
	picture = great_city

	left_portrait = c:EGY.current_ruler
	right_portrait = c:PRY.current_ruler
	left_portrait = scope:mission_country_scope.current_ruler

	trigger = {
		has_land = yes
	}

	immediate = {
		random_active_war= {
			limit = {
				OR = {
					AND = {
						any_war_attacker = { this = c:EGY }
						any_war_defender = { this = c:PRY }
					}
					AND = {
						any_war_defender = { this = c:EGY }
						any_war_attacker = { this = c:PRY }
					}
				}
			}
			save_scope_as = pry_egy_jud_war_scope
		}
	}

	option = {
		name = judea_inv.4.a
		scope:mission_country_scope = { #on Ptolemaios' side
			add_to_war = {
				target = scope:pry_egy_jud_war_scope
				attacker = yes 
				leader = no
			}
		}
		scope:mission_country_scope = {
			trigger_event = {
				id = judea_inv.5
				days = -1
			}
		}
		ai_chance = {
            factor = 2
            modifier = {
                factor = 2.5
                opinion = {
					target = scope:mission_country_scope
					value >= 50
				} 
            }
            modifier = {
                factor = 3
                opinion = {
					target = scope:mission_country_scope
					value >= 100
				} 
            }
        }
	}
	option = {
		name = judea_inv.4.b
		scope:mission_country_scope = {
			set_variable = {
				name = no_want_war
				days = -1
			}
		}
		scope:mission_country_scope = {
			trigger_event = {
				id = judea_inv.5
				days = -1
			}
		}
		ai_chance = {
            factor = 1
            modifier = {
                factor = 1.5
                opinion = {
					target = scope:mission_country_scope
					value <= -50
				} 
            }
            modifier = {
                factor = 2
                opinion = {
					target = scope:mission_country_scope
					value <= -100
				} 
            }
        }
	}
}
judea_inv.5 = { #Answer 
	type = country_event
	title = judea_inv.5.t
	desc = {
        desc = judea_inv.5.desc
        first_valid = {
            triggered_desc = { # At War
                trigger = { 
                    root = { war = yes }
                }
                desc = judea_inv.5.desc_1
            }
            triggered_desc = { # Other
                trigger = { always = yes }
                desc = judea_inv.5.desc_2
            }
        }
    }
	picture = great_city

	left_portrait = current_ruler
	right_portrait = c:PRY.current_ruler
	right_portrait = c:EGY.current_ruler

	trigger = {
		has_land = yes
	}

	option = {
		name = judea_inv.5.a
		add_manpower = 4
	}

}
judea_inv.6 = {							# Nabataea vassalage
    type = country_event
    title = judea_inv.6.t
    desc = judea_inv.6.desc
    picture = council_country

    left_portrait = current_ruler
    right_portrait = c:NBT.current_ruler

    trigger = { 
        has_land = yes
    }
	
	immediate = {
		add_political_influence = -25
        add_treasury = -200
	}

    option = {      
        name = judea_inv.6.a
		if = {
			limit = {
				exists = c:NBT
			}
			c:NBT = {
				trigger_event = { id = judea_inv.7 }
			}			}
		else = {
			p:4860 = { add_claim = root }
		}
    }
}
judea_inv.7 = {                           # Feudatory - Nabataea side
    type = country_event
    title = judea_inv.7.t
    desc = judea_inv.7.desc
    picture = council_country
    left_portrait = scope:mission_country_scope.current_ruler
    right_portrait = c:NBT.current_ruler


    trigger = {
        has_land = yes
    }  

    immediate = { save_scope_as = nabataea_scope }

    option = { #feudatory
        name = judea_inv.7.a
        scope:mission_country_scope = {
            make_subject = {
                type = feudatory
                target = nabataea_scope
            }
        }
        ai_chance = {
            factor = 1
            modifier = {
                factor = 2
                opinion = {
					target = scope:mission_country_scope
					value >= 50
				} 
            }
            modifier = {
                factor = 3
                opinion = {
					target = scope:mission_country_scope
					value >= 100
				} 
            }
        }
    }

    option = { #refusal
        name = judea_inv.7.b
        c:NBT.capital_scope = { 
			add_claim = scope:mission_country_scope 
		}
        ai_chance = {
            factor = 1
            modifier = {
                factor = 1.5
                opinion = {
					target = scope:mission_country_scope
					value <= -50
				}
            }
            modifier = {
                factor = 2
                opinion = {
					target = scope:mission_country_scope
					value <= -100
				}
			}
			modifier = {
                factor = 3
                opinion = {
					target = scope:mission_country_scope
					value <= -150
				}
            }
        }
    }

    after = {
        scope:mission_country_scope = {
            trigger_event = { 
                id = judea_inv.8 
                days = 5
            }
        }
    }
}
judea_inv.8 = {                           # Nabataea vassal - Response
    type = country_event
    title = judea_inv.8.t
    desc = {
        desc = judea_inv.8.desc
        first_valid = {
            triggered_desc = { # Positive
                trigger = { 
                    c:NBT = { is_subject_of = root }
                }
                desc = judea_inv.8.desc_1
            }
            triggered_desc = { # Other
                trigger = { always = yes }
                desc = judea_inv.8.desc_2
            }
        }
    }
    picture = council_country
    left_portrait = current_ruler
    right_portrait = c:NBT.current_ruler

    trigger = {
        has_land = yes
    }  

    immediate = {
        if = {
            limit = {
                c:NBT = { is_subject_of = root }
            }
            show_as_tooltip = {
                make_subject = {
                    type = feudatory
                    target = c:NBT
                }
            }
        }
        else = {
            p:4860 = { add_claim = root }
        }
    }

    option = {
        name = judea_inv.8.a
        trigger = { 
            c:NBT = { is_subject_of = root }
        }
    }

    option = {
        name = judea_inv.8.b
        trigger = { 
            c:NBT = { is_subject = no }
        }
    }
}
judea_inv.9 = {
	type = country_event
	title = judea_inv.9.t
	desc = judea_inv.9.desc
	picture = religious_rite
	
	left_portrait = current_ruler

	trigger = {
		has_land = yes
	}

	option = { #Kinnor of David
		name = judea_inv.9.a
		create_country_treasure = {
			key = kinnor_david
			icon = kinnor_david 
			modifier = {
				local_unrest = -1 
			}
		}
	}
}
judea_inv.10 = { #Finishing event for forming the Kingdom of David
	type = country_event
	title = judea_inv.10.t
	desc = judea_inv.10.desc
	picture = council_country #to be determined


	trigger = {
		religion = judaism
	}

	option = {
		name = judea_inv.10.a
	}
}
judea_inv.11 = { #Metropolis Building Event 1
	type = country_event
	title = judea_inv.11.t
	desc = judea_inv.11.desc
	picture = city_construction

	trigger = {
		religion = judaism
	}

	immediate = {

	}

	option = {
		name = judea_inv.11.a
	}

}
judea_inv.12 = { #Metropolis Building Event 2
	type = country_event
	title = judea_inv.12.t
	desc = judea_inv.12.desc
	picture = great_city

	trigger = {
		religion = judaism
	}

	immediate = {

	}

	option = {
		name = judea_inv.12.a
	}
}
judea_inv.13 = { #Metropolis Building Event 3
	type = country_event
	title = judea_inv.13.t
	desc = judea_inv.13.desc
	picture = great_city

	trigger = {
		religion = judaism
	}

	immediate = {

	}

	option = {
		name = judea_inv.13.a
	}

}
judea_inv.14 = { #Flavour after having Holy Sites everywhere
	type = country_event
	title = judea_inv.14.t
	desc = judea_inv.14.desc
	picture = religious_rite

	trigger = {
		religion = judaism
	}

	option = {
		name = judea_inv.14.a
		add_country_modifier = {
			name = judea_modifier_17
			duration = 100
		}
	}
}
judea_inv.15 = { #Ark of the Covenant
	type = country_event
	title = judea_inv.15.t
	desc = judea_inv.15.desc
	picture = religious_rite
	
	left_portrait = current_ruler

	trigger = {
		religion = judaism
		NOT = {
			has_variable = not_paid
		}
	}

	option = {
		name = judea_inv.15.a
		create_country_treasure = {
			key = ark_of_the_covenant
			icon = ark_of_covenant 
			modifier = {
				local_pop_capacity_modfier = 0.25 #temporary effect
			}
		}
		capital_scope = {
			add_province_modifier = {
				name = judea_modifier_18
				duration = -1
			}
		}
	}

	option = {
		name = judea_inv.15.b
		trigger = {
			has_variable = no_protection_curse
		}
		exclusive = yes
		create_country_treasure = {
			key = ark_of_the_covenant
			icon = ark_of_covenant 
			modifier = {
				land_morale = 0.1 #temporary effect
			}
		}
		capital_scope = {
			add_province_modifier = {
				name = judea_modifier_18
				duration = -1
			}
		}
		custom_tooltip = judea_inv.15.tt
		hidden_effect = {
			current_ruler = {
				death = {
					death_reason = death_obscurity
				}
			}
		}
		
	}
}
judea_inv.16 = { #Start Search Ark of the Covenant
	type = country_event
	title = judea_inv.16.t
	desc = judea_inv.16.desc
	picture = throneroom
	
	left_portrait = current_ruler
	right_portrait = scope:indiana_jones

	trigger = {
		has_land = yes
	}

	immediate = {
		random_character = {
			limit = {
				is_ruler = no
				OR = {
					martial >= 9
					zeal >= 9
				}
			}
			save_scope_as = indiana_jones
		}
	}

	option = {
		name = judea_inv.16.a
		trigger_event = {
			id = judea_inv.17
			days = { 40 80 }
		}
	}
}
judea_inv.17 = { #Difficulties in finding treasure
	type = country_event
	title = judea_inv.17.t
	desc = judea_inv.17.desc
	picture = throneroom

	right_portrait = scope:indiana_jones
	left_portrait = current_ruler

	trigger = {
		has_land = yes
	}

	option = {
		name = judea_inv.17.a
		add_treasury = {
			value = -800
			divide = root.current_ruler.finesse
		}
		trigger_event = {
			id = judea_inv.18
			days = { 40 80 }
		}
	}

	option = {
		name = judea_inv.17.b
		add_political_influence = -20 #temp nbr
		trigger_event = {
			id = judea_inv.18
			days = { 40 80 }
		}
		
	}

	option = { 
		name = judea_inv.17.c
		hidden_effect = {
			set_variable = not_paid
			current_ruler = {
				add_popularity = -10
			}
		}
	}
}
judea_inv.18 = { #Priest approaching to help when treasure is found
	type = country_event
	title = judea_inv.18.t
	desc = judea_inv.18.desc
	picture = city_country

	right_portrait = scope:indiana_jones
	left_portrait = current_ruler

	trigger = {
		has_land = yes
	}

	immediate = {
		
	}

	option = {
		name = judea_inv.18.a
		add_treasury = {
			value = -800
			divide = root.current_ruler.finesse
		}
		trigger_event = {
			id = judea_inv.15
			days = { 15 25 }
		}
	}

	option = {
		name = judea_inv.18.b
		add_political_influence = -20 #temp nbr
		trigger_event = {
			id = judea_inv.15
			days = { 15 25 }
		}
	}

	option = { 
		name = judea_inv.18.c
		hidden_effect = {
			set_variable = no_protection_curse
		}
		trigger_event = {
			id = judea_inv.15
			days = { 15 25 }
		}
	}
}

